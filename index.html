<!doctype html>
<html lang="id" dir="ltr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=5.0">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Portal Arabi</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&amp;family=Noto+Sans+Arabic:wght@400;500;600;700&amp;family=Noto+Color+Emoji&amp;display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        html, body {
            box-sizing: border-box;
            height: 100%;
            overflow-x: hidden;
            overflow-y: auto;
        }
        
        body {
            min-height: 100%;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Emoji support untuk semua perangkat */
        * {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Nunito', 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
        }
        
        .emoji, .cloud, span[class*="text-"] {
            font-family: 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif !important;
            display: inline-block;
        }
        
        /* Pastikan semua emoji standalone ditampilkan dengan benar */
        body *:not(.latin-body):not(.latin-heading):not(.arabic-text):not(.arabic-quiz) {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Nunito', 'Noto Color Emoji', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
        }
        
        /* Modern animated background */
        .animated-bg {
            background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 50%, #60a5fa 100%);
            position: relative;
            min-height: 100vh;
        }
        
        /* Floating clouds animation */
        .cloud {
            position: fixed;
            font-size: 40px;
            opacity: 0.7;
            animation: float-cloud linear infinite;
            z-index: 1;
            pointer-events: none;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .cloud-1 {
            top: 10%;
            left: -100px;
            animation-duration: 25s;
            animation-delay: 0s;
        }
        
        .cloud-2 {
            top: 20%;
            left: -100px;
            animation-duration: 30s;
            animation-delay: 5s;
            font-size: 35px;
        }
        
        .cloud-3 {
            top: 30%;
            left: -100px;
            animation-duration: 35s;
            animation-delay: 10s;
            font-size: 45px;
        }
        
        .cloud-4 {
            top: 40%;
            left: -100px;
            animation-duration: 28s;
            animation-delay: 15s;
            font-size: 38px;
        }
        
        .cloud-5 {
            top: 50%;
            left: -100px;
            animation-duration: 32s;
            animation-delay: 20s;
            font-size: 42px;
        }
        
        .cloud-6 {
            top: 60%;
            left: -100px;
            animation-duration: 27s;
            animation-delay: 25s;
            font-size: 36px;
        }
        
        @keyframes float-cloud {
            0% { 
                transform: translateX(-100px);
            }
            100% { 
                transform: translateX(calc(100vw + 100px));
            }
        }
        
        /* Content overlay */
        .content-overlay {
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.45);
            backdrop-filter: blur(8px);
            border-radius: 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: visible;
        }
        
        /* Welcome screen specific - no blur */
        .welcome-content {
            background: transparent;
            backdrop-filter: none;
        }
        
        .arabic-text {
            font-family: 'Noto Sans Arabic', 'Noto Color Emoji', 'Apple Color Emoji', Arial, sans-serif !important;
            font-size: 1.4em;
            line-height: 2;
            direction: rtl;
            font-weight: 500;
        }
        
        .arabic-quiz {
            font-family: 'Noto Sans Arabic', 'Noto Color Emoji', 'Apple Color Emoji', Arial, sans-serif !important;
            font-size: 2em;
            line-height: 1.8;
            direction: rtl;
            font-weight: 600;
        }
        
        .latin-heading {
            font-family: 'Nunito', 'Noto Color Emoji', 'Apple Color Emoji', Arial, sans-serif !important;
            font-weight: 800;
        }
        
        .latin-body {
            font-family: 'Nunito', 'Noto Color Emoji', 'Apple Color Emoji', Arial, sans-serif !important;
            font-weight: 400;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .adventure-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .adventure-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #0ea5e9;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            transition: all 0.3s ease;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
            transform: translateY(-2px);
        }
        
        .btn-primary:active {
            transform: scale(0.97);
            opacity: 0.9;
        }
        
        .btn-accent {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            transition: all 0.3s ease;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .btn-accent:hover {
            background: linear-gradient(135deg, #d97706 0%, #b45309 100%);
            transform: translateY(-2px);
        }
        
        .btn-accent:active {
            transform: scale(0.97);
            opacity: 0.9;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #0ea5e9 0%, #06b6d4 100%);
            border-radius: 10px;
            height: 8px;
        }
        
        .quiz-option {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        
        .quiz-option:hover {
            border-color: #0ea5e9;
            background-color: #f0f9ff;
        }
        
        .quiz-option.selected {
            border-color: #0ea5e9;
            background-color: #dbeafe;
        }
        
        .quiz-option.correct {
            border-color: #10b981;
            background-color: #d1fae5;
        }
        
        .quiz-option.incorrect {
            border-color: #ef4444;
            background-color: #fee2e2;
        }
        
        .floating-element {
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #0ea5e9;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Enhanced Mobile Responsive Design */
        
        /* Navigation Bar Mobile Improvements */
        @media (max-width: 1024px) {
            .nav-desktop-menu {
                display: none !important;
            }
        }
        
        /* Tablet Responsive (768px - 1023px) */
        @media (max-width: 1023px) and (min-width: 768px) {
            .content-overlay {
                margin: 1rem;
                padding: 1.5rem;
                border-radius: 16px;
            }
            
            .latin-heading {
                font-size: 1.3em;
            }
            
            .latin-body {
                font-size: 1.05em;
                line-height: 1.55;
            }
            
            .arabic-text {
                font-size: 1.3em;
                line-height: 1.75;
            }
            
            .arabic-quiz {
                font-size: 1.9em;
                line-height: 1.55;
            }
        }
        
        /* Mobile Responsive (max-width: 767px) */
        @media (max-width: 767px) {
            /* Global mobile adjustments */
            .content-overlay {
                margin: 0.5rem;
                padding: 1rem;
                border-radius: 12px;
            }
            
            /* Typography mobile scaling */
            .latin-heading {
                font-size: 1.1em;
                line-height: 1.3;
            }
            
            .latin-body {
                font-size: 0.95em;
                line-height: 1.5;
            }
            
            .arabic-text {
                font-size: 1.2em;
                line-height: 1.65;
            }
            
            .arabic-quiz {
                font-size: 1.7em;
                line-height: 1.45;
            }
            
            /* Navigation mobile improvements */
            .mobile-menu-container {
                max-height: 85vh;
                overflow-y: auto;
            }
            
            /* Welcome screen mobile */
            .welcome-mobile-spacing {
                padding: 1rem 0.5rem;
            }
            
            .welcome-title-mobile {
                font-size: 1.8rem;
                line-height: 1.2;
                margin-bottom: 1rem;
            }
            
            .welcome-subtitle-mobile {
                font-size: 1rem;
                margin-bottom: 1.5rem;
            }
            
            /* Dashboard mobile cards */
            .adventure-card {
                padding: 1.25rem;
                border-radius: 16px;
            }
            
            /* Chapter content mobile */
            .chapter-mobile-nav {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            .chapter-mobile-nav button {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
                min-width: auto;
                flex: 1;
                min-width: calc(50% - 0.25rem);
            }
            
            /* Quiz mobile improvements */
            .quiz-mobile-container {
                padding: 1rem;
            }
            
            .quiz-question-mobile {
                font-size: 1.1rem;
                line-height: 1.4;
                margin-bottom: 1.5rem;
                padding: 0 0.5rem;
            }
            
            .quiz-option {
                padding: 0.875rem;
                margin-bottom: 0.75rem;
                border-radius: 12px;
                font-size: 0.9rem;
            }
            
            .quiz-option .arabic-quiz {
                font-size: 1.5rem;
                line-height: 1.3;
            }
            
            .quiz-navigation-mobile {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .quiz-navigation-mobile button {
                width: 100%;
                padding: 0.75rem;
                font-size: 0.9rem;
            }
            
            /* Games page mobile */
            .games-mobile-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .game-card-mobile {
                padding: 1rem;
                text-align: center;
            }
            
            .game-card-mobile .flex {
                flex-direction: column;
                align-items: center;
                gap: 0.75rem;
            }
            
            /* Maze game mobile */
            .maze-mobile-container {
                padding: 0.75rem;
            }
            
            .maze-controls-mobile {
                margin-top: 1rem;
                padding: 1rem;
                background: rgba(255, 255, 255, 0.9);
                border-radius: 12px;
            }
            
            .maze-dpad-mobile {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0.75rem;
            }
            
            .maze-dpad-row {
                display: flex;
                gap: 1rem;
            }
            
            .maze-control-btn {
                background: #3b82f6;
                color: white;
                border: none;
                border-radius: 12px;
                padding: 1rem 1.5rem;
                font-size: 1rem;
                font-weight: 600;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
                transition: all 0.2s ease;
                touch-action: manipulation;
                user-select: none;
            }
            
            .maze-control-btn:active {
                transform: scale(0.95);
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);
            }
            
            /* Guide page mobile */
            .guide-mobile-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .guide-section-mobile {
                padding: 1rem;
                border-radius: 12px;
            }
            
            .guide-section-mobile h3 {
                font-size: 1.1rem;
                margin-bottom: 0.75rem;
            }
            
            .guide-section-mobile .space-y-4 > div {
                padding: 0.75rem;
                border-radius: 8px;
                margin-bottom: 0.75rem;
            }
            
            /* Footer mobile */
            .footer-mobile-container {
                padding: 1rem;
                text-align: center;
            }
            
            .footer-mobile-contact {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
            }
            
            .footer-mobile-contact .flex {
                flex-direction: column;
                gap: 0.5rem;
                text-align: center;
            }
            
            .footer-mobile-whatsapp {
                width: 100%;
                justify-content: center;
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
        }
        
        /* Small Mobile Responsive (max-width: 479px) */
        @media (max-width: 479px) {
            /* Extra small mobile adjustments */
            .content-overlay {
                margin: 0.25rem;
                padding: 0.75rem;
                border-radius: 10px;
            }
            
            /* Typography extra small mobile */
            .latin-heading {
                font-size: 1rem;
                line-height: 1.25;
            }
            
            .latin-body {
                font-size: 0.85em;
                line-height: 1.45;
            }
            
            .arabic-text {
                font-size: 1.1em;
                line-height: 1.6;
            }
            
            .arabic-quiz {
                font-size: 1.5em;
                line-height: 1.4;
            }
            
            /* Welcome screen extra small */
            .welcome-title-mobile {
                font-size: 1.5rem;
                line-height: 1.15;
            }
            
            .welcome-subtitle-mobile {
                font-size: 0.9rem;
            }
            
            .floating-element .w-24.h-24 {
                width: 4rem;
                height: 4rem;
                font-size: 2rem;
            }
            
            /* Adventure cards extra small */
            .adventure-card {
                padding: 0.75rem;
                border-radius: 12px;
            }
            
            .adventure-card-icon-mobile {
                width: 2.5rem;
                height: 2.5rem;
                font-size: 1.25rem;
            }
            
            /* Quiz extra small */
            .quiz-question-mobile {
                font-size: 1rem;
                line-height: 1.35;
            }
            
            .quiz-option {
                padding: 0.75rem;
                font-size: 0.85rem;
            }
            
            .quiz-option .arabic-quiz {
                font-size: 1.3rem;
                line-height: 1.25;
            }
            
            /* Maze controls extra small */
            .maze-control-btn {
                padding: 0.875rem 1.25rem;
                font-size: 0.9rem;
            }
            
            /* Navigation title truncation */
            .nav-title-mobile {
                max-width: 120px;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }
        }
        
        /* Landscape mobile optimizations */
        @media (max-width: 767px) and (orientation: landscape) {
            .welcome-mobile-spacing {
                padding: 0.5rem;
            }
            
            .maze-mobile-container {
                padding: 0.5rem;
            }
            
            .maze-controls-mobile {
                margin-top: 0.5rem;
                padding: 0.75rem;
            }
            
            .content-overlay {
                margin: 0.25rem;
                padding: 0.75rem;
            }
        }
        
        /* Touch-friendly improvements */
        @media (hover: none) and (pointer: coarse) {
            .btn-primary, .btn-accent, .adventure-card, .quiz-option {
                transform: none;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
                cursor: pointer;
            }
            
            .btn-primary:active, .btn-accent:active {
                transform: scale(0.97);
                opacity: 0.9;
            }
            
            .adventure-card:active {
                transform: scale(0.99);
            }
            
            .quiz-option:active {
                transform: scale(0.99);
            }
            
            /* Ensure buttons are clickable on mobile */
            button {
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
                touch-action: manipulation;
                user-select: none;
                -webkit-user-select: none;
            }
        }
        
        /* High DPI display optimizations */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .arabic-text, .arabic-quiz {
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
        }
        
        /* Video Player Mobile Optimizations */
        .video-container {
            position: relative;
            width: 100%;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 12px;
        }
        
        /* Mobile video improvements */
        @media (max-width: 767px) {
            .video-container {
                border-radius: 8px;
                min-height: 200px;
            }
            
            .video-container iframe {
                border-radius: 8px;
            }
            
            /* Ensure video controls are touch-friendly */
            .video-container::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                z-index: -1;
                background: #000;
                border-radius: 8px;
            }
        }
        
        /* Extra small mobile video */
        @media (max-width: 479px) {
            .video-container {
                min-height: 180px;
                border-radius: 6px;
            }
            
            .video-container iframe {
                border-radius: 6px;
            }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="min-h-full animated-bg"><!-- Floating Clouds -->
  <div class="cloud cloud-1">
   â˜ï¸
  </div>
  <div class="cloud cloud-2">
   â˜
  </div>
  <div class="cloud cloud-3">
   â˜ï¸
  </div>
  <div class="cloud cloud-4">
   â˜ï¸
  </div>
  <div class="cloud cloud-5">
   â˜ï¸
  </div>
  <div class="cloud cloud-6">
   â˜
  </div><!-- Navigation -->
  <nav class="bg-white/75 backdrop-blur-lg shadow-xl sticky top-0 z-50 border-b border-white/30">
   <div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-14 sm:h-16"><!-- Logo & Title -->
     <div class="flex items-center space-x-2 sm:space-x-3 flex-shrink-0">
      <div class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-amber-400 to-orange-600 rounded-lg sm:rounded-xl flex items-center justify-center shadow-lg"><span class="emoji text-white text-lg sm:text-xl">ğŸ¦…</span>
      </div>
      <h1 id="site-title" class="latin-heading text-sm sm:text-lg lg:text-xl text-gray-800 font-bold truncate max-w-[140px] sm:max-w-none">Portal Pelajar Bahasa Arab</h1>
     </div><!-- Desktop Navigation Menu -->
     <div id="nav-menu" class="nav-desktop-menu hidden lg:flex items-center space-x-6"><button onclick="showDashboard()" class="latin-body text-gray-600 hover:text-sky-600 transition-colors text-sm"> <span class="emoji">ğŸ </span> Dashboard </button>
      <div class="relative group"><button class="latin-body text-gray-600 hover:text-sky-600 transition-colors flex items-center space-x-1 text-sm"> <span><span class="emoji">ğŸ“š</span> Materi</span> <span class="text-xs">â–¼</span> </button>
       <div class="absolute top-full left-0 mt-2 w-64 bg-white rounded-xl shadow-xl border border-gray-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
        <div class="p-2"><button onclick="openChapter(1)" class="w-full text-left p-3 rounded-lg hover:bg-sky-50 transition-colors">
          <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ“Š</span>
           <div>
            <div class="latin-body font-semibold text-gray-800">
             Bab 1: Isim Tafdil
            </div>
            <div class="latin-body text-sm text-gray-600">
             Kata Perbandingan
            </div>
           </div>
          </div></button> <button onclick="openChapter(2)" class="w-full text-left p-3 rounded-lg hover:bg-purple-50 transition-colors">
          <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ”·</span>
           <div>
            <div class="latin-body font-semibold text-gray-800">
             Bab 2: Bentuk
            </div>
            <div class="latin-body text-sm text-gray-600">
             Shapes &Forms
            </div>
           </div>
          </div></button> <button onclick="openChapter(3)" class="w-full text-left p-3 rounded-lg hover:bg-red-50 transition-colors">
          <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ¨</span>
           <div>
            <div class="latin-body font-semibold text-gray-800">
             Bab 3: Warna
            </div>
            <div class="latin-body text-sm text-gray-600">
             Colors in Arabic
            </div>
           </div>
          </div></button> <button onclick="openChapter(4)" class="w-full text-left p-3 rounded-lg hover:bg-amber-50 transition-colors">
          <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸŒ™</span>
           <div>
            <div class="latin-body font-semibold text-gray-800">
             Bab 4: Kalender Hijriah
            </div>
            <div class="latin-body text-sm text-gray-600">
             Islamic Calendar
            </div>
           </div>
          </div></button>
        </div>
       </div>
      </div><button onclick="showGames()" class="latin-body text-gray-600 hover:text-sky-600 transition-colors text-sm"> ğŸ® Game </button> <button onclick="showGuide()" class="latin-body text-gray-600 hover:text-sky-600 transition-colors text-sm"> ğŸ’¡ Petunjuk </button>
     </div><!-- Right Side: Student Info & Mobile Menu -->
     <div class="flex items-center space-x-2 sm:space-x-4"><!-- Student Info -->
      <div id="student-info" class="hidden flex items-center space-x-3"><span id="student-name-display" class="latin-body text-gray-600 text-xs sm:text-sm truncate max-w-[80px] sm:max-w-[120px]"></span> <button onclick="logout()" class="text-xs text-gray-500 hover:text-gray-700 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition-colors">Keluar</button>
      </div><!-- Mobile Menu Button --> <button id="mobile-menu-btn" onclick="toggleMobileMenu()" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors">
       <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
       </svg></button>
     </div>
    </div>
   </div><!-- Mobile Menu Panel -->
   <div id="mobile-menu-panel" class="hidden lg:hidden bg-white border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-4 space-y-3"><!-- Mobile Student Info (Duplicate for mobile visibility) -->
     <div id="mobile-student-info" class="hidden bg-gradient-to-r from-sky-50 to-blue-50 p-3 rounded-xl">
      <div class="flex items-center justify-between">
       <div>
        <p class="latin-body text-xs text-gray-500">Logged in as</p>
        <p id="mobile-student-name" class="latin-body text-sm font-semibold text-gray-800"></p>
       </div><button onclick="logout()" class="text-xs bg-white text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg transition-colors shadow-sm"> Keluar </button>
      </div>
     </div><!-- Mobile Navigation Buttons --> <button onclick="showDashboard(); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-sky-50 transition-colors flex items-center space-x-3"> <span class="emoji text-xl">ğŸ </span> <span class="latin-body text-gray-700 font-medium">Dashboard</span> </button> <!-- Mobile Materi Dropdown -->
     <div class="space-y-2">
      <div class="latin-body text-xs font-semibold text-gray-500 uppercase tracking-wide px-3">
       Materi Pembelajaran
      </div><button onclick="openChapter(1); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-sky-50 transition-colors">
       <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ“Š</span>
        <div>
         <div class="latin-body font-semibold text-gray-800 text-sm">
          Bab 1: Isim Tafdil
         </div>
         <div class="latin-body text-xs text-gray-600">
          Kata Perbandingan
         </div>
        </div>
       </div></button> <button onclick="openChapter(2); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-purple-50 transition-colors">
       <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ”·</span>
        <div>
         <div class="latin-body font-semibold text-gray-800 text-sm">
          Bab 2: Bentuk
         </div>
         <div class="latin-body text-xs text-gray-600">
          Shapes & Forms
         </div>
        </div>
       </div></button> <button onclick="openChapter(3); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-red-50 transition-colors">
       <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸ¨</span>
        <div>
         <div class="latin-body font-semibold text-gray-800 text-sm">
          Bab 3: Warna
         </div>
         <div class="latin-body text-xs text-gray-600">
          Colors in Arabic
         </div>
        </div>
       </div></button> <button onclick="openChapter(4); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-amber-50 transition-colors">
       <div class="flex items-center space-x-3"><span class="emoji text-xl">ğŸŒ™</span>
        <div>
         <div class="latin-body font-semibold text-gray-800 text-sm">
          Bab 4: Kalender Hijriah
         </div>
         <div class="latin-body text-xs text-gray-600">
          Islamic Calendar
         </div>
        </div>
       </div></button>
     </div><button onclick="showGames(); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-sky-50 transition-colors flex items-center space-x-3"> <span class="emoji text-xl">ğŸ®</span> <span class="latin-body text-gray-700 font-medium">Game</span> </button> <button onclick="showGuide(); toggleMobileMenu();" class="w-full text-left p-3 rounded-lg hover:bg-sky-50 transition-colors flex items-center space-x-3"> <span class="emoji text-xl">ğŸ’¡</span> <span class="latin-body text-gray-700 font-medium">Petunjuk</span> </button>
    </div>
   </div>
  </nav><!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10">
   <div class="content-overlay welcome-content p-6 md:p-8 min-h-screen"><!-- Welcome Screen -->
    <div id="welcome-screen" class="welcome-mobile-spacing text-center px-4">
     <div class="mb-6 md:mb-8">
      <div class="floating-element inline-block">
       <div class="w-24 h-24 md:w-32 md:h-32 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-4xl md:text-6xl mb-4 md:mb-6 mx-auto shadow-2xl"><span class="emoji">ğŸ›ï¸</span>
       </div>
      </div>
      <div class="mb-4">
       <div class="arabic-text text-2xl sm:text-3xl md:text-5xl lg:text-6xl text-blue-600 mb-2 font-bold">
        Ø£ÙÙ‡Ù’Ù„Ø§Ù‹ ÙˆÙØ³ÙÙ‡Ù’Ù„Ø§Ù‹
       </div>
       <div class="mb-4">
        <h1 class="latin-heading text-2xl sm:text-3xl md:text-4xl lg:text-5xl text-blue-600 font-bold mb-2">Portal Pelajar Bahasa Arab</h1>
        <h2 id="welcome-message" class="welcome-title-mobile latin-heading text-xl sm:text-2xl md:text-3xl lg:text-4xl text-gray-800 px-2"><span id="time-greeting">Assalamu'alaikum</span>, petualang ğŸ‘‹</h2>
       </div>
       <p id="time-message" class="welcome-subtitle-mobile latin-body text-sm sm:text-base md:text-lg lg:text-xl text-gray-600 mt-2 px-2"></p>
      </div>
     </div>
     <div class="max-w-md mx-auto bg-white/95 backdrop-blur-sm rounded-2xl md:rounded-3xl p-4 sm:p-6 md:p-8 shadow-2xl border-2 border-white/60">
      <div class="mb-6"><label for="student-name" class="block latin-body text-sm sm:text-base md:text-lg font-semibold text-gray-800 mb-3"> Siapa nama petualang <span id="time-period">hari ini</span>? </label> <input type="text" id="student-name" placeholder="Masukkan nama kamu..." class="w-full px-3 md:px-4 py-2 md:py-3 border-2 border-gray-300 rounded-xl focus:border-sky-500 focus:outline-none latin-body text-sm sm:text-base md:text-lg bg-white shadow-inner" oninput="updateGreetingWithName()">
      </div><button onclick="startAdventure()" id="start-btn" class="w-full btn-primary text-white py-2 md:py-3 px-4 md:px-6 rounded-xl latin-body text-sm sm:text-base md:text-lg font-semibold shadow-lg transform hover:scale-105 transition-all touch-manipulation"> Mulai Petualangan! ğŸš€ </button>
     </div>
    </div><!-- Dashboard -->
    <div id="dashboard" class="hidden">
     <div class="text-center mb-8">
      <h2 class="latin-heading text-3xl text-gray-800 mb-2">Selamat Datang!</h2>
      <p class="latin-body text-gray-600">Lanjutkan petualangan bahasa Arabmu</p>
     </div><!-- Progress Overview -->
     <div class="bg-white/55 backdrop-blur-md rounded-3xl p-6 mb-8 shadow-xl border border-white/25">
      <h3 class="latin-heading text-xl text-gray-800 mb-4">Progress Petualangan</h3>
      <div class="flex items-center space-x-4">
       <div class="flex-1">
        <div class="bg-gray-200 rounded-full h-3">
         <div id="overall-progress" class="progress-bar h-3 rounded-full" style="width: 0%"></div>
        </div>
       </div><span id="progress-text" class="latin-body text-sm text-gray-600">0% Selesai</span>
      </div>
     </div><!-- Tips & Guide Section -->
     <div class="grid lg:grid-cols-3 gap-6 mb-8"><!-- Learning Tips -->
      <div class="bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-3xl shadow-lg border border-green-100">
       <div class="flex items-center mb-4">
        <div class="w-12 h-12 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl flex items-center justify-center text-2xl mr-3">
         ğŸ’¡
        </div>
        <h3 class="latin-heading text-lg text-gray-800">Tips Pembelajaran</h3>
       </div>
       <div class="space-y-3">
        <div class="flex items-start space-x-2"><span class="text-green-600 mt-1">âœ“</span>
         <p class="latin-body text-sm text-gray-700">Dengarkan lagu mufradat untuk menghapal lebih mudah</p>
        </div>
        <div class="flex items-start space-x-2"><span class="text-green-600 mt-1">âœ“</span>
         <p class="latin-body text-sm text-gray-700">Tonton video pembelajaran sebelum mengerjakan latihan</p>
        </div>
        <div class="flex items-start space-x-2"><span class="text-green-600 mt-1">âœ“</span>
         <p class="latin-body text-sm text-gray-700">Ulangi materi yang belum dipahami</p>
        </div>
       </div>
      </div><!-- Usage Guide -->
      <div class="bg-gradient-to-br from-blue-50 to-sky-50 p-6 rounded-3xl shadow-lg border border-blue-100">
       <div class="flex items-center mb-4">
        <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-sky-600 rounded-2xl flex items-center justify-center text-2xl mr-3">
         ğŸ“–
        </div>
        <h3 class="latin-heading text-lg text-gray-800">Petunjuk Penggunaan</h3>
       </div>
       <div class="space-y-3">
        <div class="flex items-start space-x-2"><span class="text-blue-600 mt-1">1.</span>
         <p class="latin-body text-sm text-gray-700">Pilih bab yang ingin dipelajari</p>
        </div>
        <div class="flex items-start space-x-2"><span class="text-blue-600 mt-1">2.</span>
         <p class="latin-body text-sm text-gray-700">Pelajari materi secara berurutan</p>
        </div>
        <div class="flex items-start space-x-2"><span class="text-blue-600 mt-1">3.</span>
         <p class="latin-body text-sm text-gray-700">Kerjakan latihan soal di akhir bab</p>
        </div>
       </div>
      </div><!-- Quick Stats -->
      <div class="bg-gradient-to-br from-purple-50 to-indigo-50 p-6 rounded-3xl shadow-lg border border-purple-100">
       <div class="flex items-center mb-4">
        <div class="w-12 h-12 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-2xl flex items-center justify-center text-2xl mr-3">
         ğŸ“Š
        </div>
        <h3 class="latin-heading text-lg text-gray-800">Statistik Belajar</h3>
       </div>
       <div class="space-y-3">
        <div class="flex justify-between items-center"><span class="latin-body text-sm text-gray-600">Total Bab:</span> <span class="latin-body text-sm font-semibold text-purple-600">4 Bab</span>
        </div>
        <div class="flex justify-between items-center"><span class="latin-body text-sm text-gray-600">Total Materi:</span> <span class="latin-body text-sm font-semibold text-purple-600">12 Pelajaran</span>
        </div>
        <div class="flex justify-between items-center"><span class="latin-body text-sm text-gray-600">Video:</span> <span class="latin-body text-sm font-semibold text-purple-600">4 Video</span>
        </div>
        <div class="flex justify-between items-center"><span class="latin-body text-sm text-gray-600">Lagu:</span> <span class="latin-body text-sm font-semibold text-purple-600">4 Lagu</span>
        </div>
       </div>
      </div>
     </div><!-- Chapter Cards -->
     <div class="dashboard-mobile-grid grid md:grid-cols-2 gap-4 md:gap-8"><!-- Chapter 1: Isim Tafdil -->
      <div class="adventure-card p-4 md:p-6">
       <div class="adventure-card-mobile-content flex items-center mb-4">
        <div class="adventure-card-icon-mobile w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-emerald-400 to-green-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-0 md:mr-4">
         ğŸ“Š
        </div>
        <div class="flex-1 md:flex-initial">
         <h3 class="latin-heading text-lg md:text-xl text-gray-800">Bab 1: Isim Tafdil</h3>
         <p class="latin-body text-sm md:text-base text-gray-600">Kata Perbandingan</p>
        </div>
       </div>
       <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Pelajari cara membandingkan benda dalam bahasa Arab dengan pola Ø£ÙÙÙ’Ø¹ÙÙ„Ù</p>
       <div class="arabic-text text-center text-sky-600 mb-4 bg-sky-50 p-3 rounded-xl text-base md:text-lg">
        Ø£ÙÙƒÙ’Ø¨ÙØ±Ù - Ø£ÙØµÙ’ØºÙØ±Ù - Ø£ÙØ·Ù’ÙˆÙÙ„Ù
       </div><button onclick="openChapter(1)" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Bab 1 ğŸ¯ </button>
      </div><!-- Chapter 2: Bentuk -->
      <div class="adventure-card p-4 md:p-6">
       <div class="adventure-card-mobile-content flex items-center mb-4">
        <div class="adventure-card-icon-mobile w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-0 md:mr-4">
         ğŸ”·
        </div>
        <div class="flex-1 md:flex-initial">
         <h3 class="latin-heading text-lg md:text-xl text-gray-800">Bab 2: Bentuk</h3>
         <p class="latin-body text-sm md:text-base text-gray-600">Shapes & Forms</p>
        </div>
       </div>
       <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Kenali berbagai bentuk geometri dalam bahasa Arab</p>
       <div class="arabic-text text-center text-purple-600 mb-4 bg-purple-50 p-3 rounded-xl text-base md:text-lg">
        Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ - Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ - Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ
       </div><button onclick="openChapter(2)" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Bab 2 ğŸ”º </button>
      </div><!-- Chapter 3: Warna -->
      <div class="adventure-card p-4 md:p-6">
       <div class="adventure-card-mobile-content flex items-center mb-4">
        <div class="adventure-card-icon-mobile w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-red-400 to-pink-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-0 md:mr-4">
         ğŸ¨
        </div>
        <div class="flex-1 md:flex-initial">
         <h3 class="latin-heading text-lg md:text-xl text-gray-800">Bab 3: Warna</h3>
         <p class="latin-body text-sm md:text-base text-gray-600">Colors in Arabic</p>
        </div>
       </div>
       <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Pelajari nama-nama warna dalam bahasa Arab dan penggunaannya</p>
       <div class="arabic-text text-center text-red-600 mb-4 bg-red-50 p-3 rounded-xl text-base md:text-lg">
        Ø£ÙØ­Ù’Ù…ÙØ±Ù - Ø£ÙØ¨Ù’ÙŠÙØ¶Ù - Ø£ÙØ³Ù’ÙˆÙØ¯Ù
       </div><button onclick="openChapter(3)" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Bab 3 ğŸ¨ </button>
      </div><!-- Chapter 4: Kalender Hijriah -->
      <div class="adventure-card p-4 md:p-6">
       <div class="adventure-card-mobile-content flex items-center mb-4">
        <div class="adventure-card-icon-mobile w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-amber-400 to-yellow-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-0 md:mr-4">
         ğŸŒ™
        </div>
        <div class="flex-1 md:flex-initial">
         <h3 class="latin-heading text-lg md:text-xl text-gray-800">Bab 4: Kalender Hijriah</h3>
         <p class="latin-body text-sm md:text-base text-gray-600">Islamic Calendar</p>
        </div>
       </div>
       <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Kenali nama-nama bulan dalam kalender Hijriah dan peristiwa pentingnya</p>
       <div class="arabic-text text-center text-amber-600 mb-4 bg-amber-50 p-3 rounded-xl text-base md:text-lg">
        Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ - Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù - Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ
       </div><button onclick="openChapter(4)" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Bab 4 ğŸŒ™ </button>
      </div>
     </div>
    </div><!-- Chapter Content -->
    <div id="chapter-content" class="hidden">
     <div class="mb-6"><button onclick="backToDashboard()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold"> <span>â†</span> <span>Kembali ke Dashboard</span> </button>
     </div>
     <div id="chapter-header" class="text-center mb-8">
      <h2 id="chapter-title" class="latin-heading text-3xl text-gray-800 mb-2"></h2>
      <p id="chapter-subtitle" class="latin-body text-gray-600"></p>
     </div><!-- Lesson Navigation -->
     <div id="lesson-nav" class="bg-white/55 backdrop-blur-md rounded-2xl p-3 md:p-4 mb-6 md:mb-8 shadow-lg border border-white/25">
      <div class="chapter-mobile-nav flex flex-wrap gap-2" id="lesson-buttons"></div>
     </div><!-- Lesson Content -->
     <div id="lesson-content" class="bg-white/55 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/25"><!-- Content will be dynamically loaded -->
     </div>
    </div><!-- Quiz Interface -->
    <div id="quiz-interface" class="hidden">
     <div class="mb-4 md:mb-6"><button onclick="backToLesson()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold text-sm md:text-base"> <span>â†</span> <span>Kembali ke Materi</span> </button>
     </div>
     <div class="quiz-mobile-container bg-white/55 backdrop-blur-md rounded-2xl md:rounded-3xl p-4 md:p-8 shadow-xl border border-white/25">
      <div class="text-center mb-6 md:mb-8">
       <h2 class="latin-heading text-lg md:text-xl lg:text-2xl text-gray-800 mb-2">Latihan Soal</h2>
       <div class="flex flex-col md:flex-row justify-center items-center space-y-2 md:space-y-0 md:space-x-4"><span id="question-counter" class="latin-body text-gray-600 text-sm md:text-base">Soal 1 dari 20</span>
        <div class="w-full md:flex-1 max-w-xs">
         <div class="bg-gray-200 rounded-full h-2">
          <div id="quiz-progress" class="progress-bar h-2 rounded-full" style="width: 5%"></div>
         </div>
        </div>
       </div>
      </div>
      <div id="quiz-question" class="quiz-question-mobile mb-6 md:mb-8"><!-- Question content -->
      </div>
      <div id="quiz-options" class="space-y-2 md:space-y-3 mb-6 md:mb-8"><!-- Options will be loaded here -->
      </div>
      <div class="quiz-navigation-mobile flex flex-col md:flex-row justify-between items-center space-y-3 md:space-y-0"><button id="prev-question" onclick="previousQuestion()" class="w-full md:w-auto btn-primary text-white py-2 px-4 md:px-6 rounded-xl latin-body font-semibold opacity-50 cursor-not-allowed text-sm md:text-base touch-manipulation" disabled> â¬… Sebelumnya </button> <button id="next-question" onclick="nextQuestion()" class="w-full md:w-auto btn-accent text-white py-2 px-4 md:px-6 rounded-xl latin-body font-semibold opacity-50 cursor-not-allowed text-sm md:text-base touch-manipulation" disabled> Selanjutnya â†’ </button>
      </div>
     </div>
    </div><!-- Quiz Results -->
    <div id="quiz-results" class="hidden">
     <div class="bg-white/55 backdrop-blur-md rounded-2xl md:rounded-3xl p-4 md:p-8 shadow-xl border border-white/25 text-center">
      <div class="mb-6">
       <div id="result-icon" class="text-4xl md:text-6xl mb-4">
        ğŸ§©
       </div>
       <h2 class="latin-heading text-2xl md:text-3xl text-gray-800 mb-2">Hasil Latihan</h2>
       <p id="score-display" class="latin-body text-lg md:text-xl text-gray-600 mb-4"></p>
       <div id="score-message" class="latin-body text-base md:text-lg text-gray-700 mb-6 px-2"></div>
      </div>
      <div class="flex flex-col sm:flex-row gap-3 md:gap-4 justify-center"><button onclick="retryQuiz()" class="btn-primary text-white py-2 md:py-3 px-4 md:px-6 rounded-xl latin-body font-semibold text-sm md:text-base"> Coba Lagi ğŸ”„ </button> <button onclick="backToLesson()" class="btn-accent text-white py-2 md:py-3 px-4 md:px-6 rounded-xl latin-body font-semibold text-sm md:text-base"> Kembali ke Materi ğŸ“š </button>
      </div>
     </div>
    </div><!-- Games Page -->
    <div id="games-page" class="hidden">
     <div class="mb-6"><button onclick="backToDashboard()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold"> <span>â†</span> <span>Kembali ke Dashboard</span> </button>
     </div>
     <div class="bg-white/55 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/25">
      <div class="text-center mb-8">
       <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-pink-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4">
        ğŸ®
       </div>
       <h2 class="latin-heading text-3xl text-gray-800 mb-2">Game Interaktif</h2>
       <p class="latin-body text-gray-600">Belajar sambil bermain dengan game seru!</p>
      </div>
      <div class="games-mobile-grid grid md:grid-cols-2 gap-4 md:gap-8"><!-- Maze Game -->
       <div class="game-card-mobile bg-gradient-to-br from-purple-50 to-indigo-50 p-4 md:p-6 rounded-2xl border-2 border-purple-100 hover:border-purple-300 transition-all">
        <div class="flex items-center mb-4">
         <div class="w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-purple-400 to-indigo-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-3 md:mr-4">
          ğŸ§©
         </div>
         <div>
          <h3 class="latin-heading text-lg md:text-xl text-gray-800">Labirin Soal</h3>
          <p class="latin-body text-sm md:text-base text-gray-600">Petualangan Menjawab</p>
         </div>
        </div>
        <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Jelajahi labirin sambil menjawab soal bahasa Arab. Kumpulkan poin dan capai finish!</p>
        <div class="bg-white p-3 rounded-xl mb-4">
         <div class="flex justify-between text-xs md:text-sm"><span class="latin-body text-gray-600">Tingkat Kesulitan:</span> <span class="latin-body text-purple-600 font-semibold">Mudah - Sulit</span>
         </div>
        </div><button onclick="startMazeGame()" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Petualangan ğŸš€ </button>
       </div><!-- Memory Game -->
       <div class="game-card-mobile bg-gradient-to-br from-green-50 to-emerald-50 p-4 md:p-6 rounded-2xl border-2 border-green-100 hover:border-green-300 transition-all">
        <div class="flex items-center mb-4">
         <div class="w-12 h-12 md:w-16 md:h-16 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl flex items-center justify-center text-2xl md:text-3xl mr-3 md:mr-4">
          ğŸ§ 
         </div>
         <div>
          <h3 class="latin-heading text-lg md:text-xl text-gray-800">Memory Match</h3>
          <p class="latin-body text-sm md:text-base text-gray-600">Cocokkan Kata</p>
         </div>
        </div>
        <p class="latin-body text-sm md:text-base text-gray-700 mb-4">Cocokkan kata Arab dengan artinya. Latih daya ingat sambil belajar vocabulary!</p>
        <div class="bg-white p-3 rounded-xl mb-4">
         <div class="flex justify-between text-xs md:text-sm"><span class="latin-body text-gray-600">Kesulitan:</span> <span class="latin-body text-green-600 font-semibold">Mudah - Sulit</span>
         </div>
        </div><button onclick="startMemoryGame()" class="w-full btn-primary text-white py-2 md:py-3 px-4 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation"> Mulai Bermain ğŸ® </button>
       </div>
      </div>
     </div>
    </div><!-- Memory Match Game Interface -->
    <div id="memory-game" class="hidden">
     <div class="mb-4"><button onclick="backToGames()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold"> <span>â†</span> <span>Kembali ke Game</span> </button>
     </div>
     <div class="bg-white/55 backdrop-blur-md rounded-3xl p-3 md:p-8 shadow-xl border border-white/25">
      <div class="text-center mb-4 md:mb-6">
       <h2 class="latin-heading text-lg md:text-xl lg:text-2xl text-gray-800 mb-4">ğŸ§  Memory Match</h2><!-- Stats Bar -->
       <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-3 md:p-4 mb-4">
        <div class="grid grid-cols-3 gap-2 md:gap-4 text-center">
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           â±ï¸
          </div>
          <div id="memory-time" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Waktu: 0s
          </div>
         </div>
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           ğŸ¯
          </div>
          <div id="memory-moves" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Gerakan: 0
          </div>
         </div>
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           âœ…
          </div>
          <div id="memory-pairs" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Pasangan: 0/8
          </div>
         </div>
        </div>
       </div>
      </div><!-- Game Board -->
      <div id="memory-board" class="grid grid-cols-4 gap-2 md:gap-3 mb-4 md:mb-6 max-w-2xl mx-auto"><!-- Cards will be generated here -->
      </div><!-- Difficulty Selection (shown before game starts) -->
      <div id="memory-difficulty-select" class="max-w-md mx-auto">
       <h3 class="latin-heading text-lg text-gray-800 mb-4 text-center">Pilih Tingkat Kesulitan</h3>
       <div class="space-y-3"><button onclick="startMemoryLevel('easy')" class="w-full bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white py-3 px-6 rounded-xl latin-body font-semibold shadow-lg"> ğŸ˜Š Mudah - 8 Pasangan </button> <button onclick="startMemoryLevel('medium')" class="w-full bg-gradient-to-r from-blue-400 to-cyan-500 hover:from-blue-500 hover:to-cyan-600 text-white py-3 px-6 rounded-xl latin-body font-semibold shadow-lg"> ğŸ¤” Sedang - 12 Pasangan </button> <button onclick="startMemoryLevel('hard')" class="w-full bg-gradient-to-r from-red-400 to-pink-500 hover:from-red-500 hover:to-pink-600 text-white py-3 px-6 rounded-xl latin-body font-semibold shadow-lg"> ğŸ˜¤ Sulit - 18 Pasangan </button>
       </div>
      </div><!-- Game Controls (hidden initially) -->
      <div id="memory-controls" class="hidden text-center space-y-3"><button onclick="restartMemoryGame()" class="btn-primary text-white py-2 px-6 rounded-xl latin-body font-semibold"> ğŸ” Main Ulang </button>
       <p class="latin-body text-gray-600 text-sm">ğŸ’¡ Tip: Ingat posisi kartu untuk mencocokkan lebih cepat!</p>
      </div>
     </div><!-- Success Modal -->
     <div id="memory-success-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white rounded-2xl p-6 max-w-md w-full text-center">
       <div class="text-6xl mb-4">
        ğŸ‰
       </div>
       <h3 class="latin-heading text-2xl text-gray-800 mb-2">Selamat!</h3>
       <p class="latin-body text-gray-600 mb-4">Kamu berhasil mencocokkan semua pasangan!</p>
       <div id="memory-final-stats" class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-xl mb-6"><!-- Stats will be inserted here -->
       </div>
       <div class="flex gap-3"><button onclick="restartMemoryGame()" class="flex-1 btn-primary text-white py-3 px-4 rounded-xl latin-body font-semibold"> Main Lagi ğŸ”„ </button> <button onclick="backToGames()" class="flex-1 btn-accent text-white py-3 px-4 rounded-xl latin-body font-semibold"> Kembali ğŸ  </button>
       </div>
      </div>
     </div>
    </div><!-- Maze Game Interface -->
    <div id="maze-game" class="hidden">
     <div class="mb-4"><button onclick="backToGames()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold"> <span>â†</span> <span>Kembali ke Game</span> </button>
     </div>
     <div class="maze-mobile-container bg-white/55 backdrop-blur-md rounded-3xl p-3 md:p-8 shadow-xl border border-white/25">
      <div class="text-center mb-4 md:mb-6">
       <h2 class="latin-heading text-lg md:text-xl lg:text-2xl text-gray-800 mb-4">ğŸ§© Labirin Soal</h2><!-- Mobile Stats Bar -->
       <div class="bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-3 md:p-4 mb-4 md:hidden">
        <div class="grid grid-cols-3 gap-2 md:gap-4 text-center">
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           ğŸ†
          </div>
          <div id="maze-score-mobile" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Skor: 0
          </div>
         </div>
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           ğŸ¯
          </div>
          <div id="maze-level-mobile" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Level: 1
          </div>
         </div>
         <div class="bg-white rounded-xl p-2 md:p-3 shadow-sm">
          <div class="text-xl md:text-2xl mb-1">
           ğŸ’–
          </div>
          <div id="maze-lives-mobile" class="latin-body text-xs md:text-sm font-semibold text-gray-700">
           Nyawa: 3
          </div>
         </div>
        </div>
       </div><!-- Desktop Stats Bar -->
       <div class="hidden md:flex justify-center items-center space-x-6"><span id="maze-score" class="latin-body text-gray-600">Skor: 0</span> <span id="maze-level" class="latin-body text-gray-600">Level: 1</span> <span id="maze-lives" class="latin-body text-gray-600">â¤ 3</span>
       </div>
      </div><!-- Maze Canvas -->
      <div class="bg-white rounded-2xl p-2 md:p-4 mb-4 md:mb-6 shadow-inner">
       <div class="flex justify-center">
        <canvas id="maze-canvas" width="600" height="400" class="border-2 border-gray-200 rounded-xl max-w-full h-auto"></canvas>
       </div>
      </div><!-- Game Controls -->
      <div class="maze-controls-mobile mb-4 md:mb-6"><!-- Mobile D-Pad Style Controls -->
       <div class="maze-dpad-mobile flex flex-col items-center space-y-3 md:hidden"><button onclick="movePlayer('up')" class="maze-control-btn"> â†‘ Atas </button>
        <div class="maze-dpad-row flex space-x-4"><button onclick="movePlayer('left')" class="maze-control-btn"> â† Kiri </button> <button onclick="movePlayer('right')" class="maze-control-btn"> Kanan â†’ </button>
        </div><button onclick="movePlayer('down')" class="maze-control-btn"> â†“ Bawah </button>
       </div><!-- Desktop Grid Controls -->
       <div class="hidden md:grid grid-cols-4 gap-3"><button onclick="movePlayer('up')" class="bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl latin-body font-semibold"> â†‘ Atas </button> <button onclick="movePlayer('down')" class="bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl latin-body font-semibold"> â†“ Bawah </button> <button onclick="movePlayer('left')" class="bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl latin-body font-semibold"> â† Kiri </button> <button onclick="movePlayer('right')" class="bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-xl latin-body font-semibold"> â†’ Kanan </button>
       </div>
      </div><!-- Question Modal -->
      <div id="maze-question-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
       <div class="bg-white rounded-2xl p-6 max-w-md w-full">
        <h3 class="latin-heading text-xl text-gray-800 mb-4 text-center">Jawab Soal untuk Lanjut!</h3>
        <div id="maze-question-content" class="mb-6"><!-- Question content will be inserted here -->
        </div>
        <div id="maze-question-options" class="space-y-3"><!-- Options will be inserted here -->
        </div>
       </div>
      </div><!-- Game Over Modal -->
      <div id="maze-game-over" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
       <div class="bg-white rounded-2xl p-6 max-w-md w-full text-center">
        <div id="maze-result-icon" class="text-6xl mb-4">
         ğŸ‰
        </div>
        <h3 id="maze-result-title" class="latin-heading text-2xl text-gray-800 mb-2">Selamat!</h3>
        <p id="maze-result-message" class="latin-body text-gray-600 mb-4">Kamu berhasil menyelesaikan labirin!</p>
        <div id="maze-final-score" class="latin-body text-xl font-bold text-purple-600 mb-6">
         Skor Akhir: 0
        </div>
        <div class="flex gap-3"><button onclick="restartMazeGame()" class="flex-1 btn-primary text-white py-3 px-4 rounded-xl latin-body font-semibold"> Main Lagi ğŸ”„ </button> <button onclick="backToGames()" class="flex-1 btn-accent text-white py-3 px-4 rounded-xl latin-body font-semibold"> Kembali ğŸ  </button>
        </div>
       </div>
      </div>
      <div class="text-center space-y-3">
       <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl">
        <p class="latin-body text-gray-700 text-sm font-semibold mb-2">ğŸ® Cara Bermain:</p>
        <div class="space-y-1 text-xs">
         <p class="latin-body text-gray-600">ğŸ“± <strong>Mobile:</strong> Gunakan tombol arah atau geser layar game</p>
         <p class="latin-body text-gray-600">ğŸ’» <strong>Desktop:</strong> Gunakan tombol panah atau WASD</p>
        </div>
       </div>
       <p class="latin-body text-gray-600 text-sm">ğŸ’¡ Tip: Kumpulkan koin emas dan jawab soal dengan benar untuk mendapat poin bonus!</p>
      </div>
     </div>
    </div><!-- Guide/Help Page -->
    <div id="guide-page" class="hidden">
     <div class="mb-6"><button onclick="backToDashboard()" class="flex items-center space-x-2 text-sky-600 hover:text-sky-700 latin-body font-semibold"> <span>â†</span> <span>Kembali ke Dashboard</span> </button>
     </div>
     <div class="bg-white/55 backdrop-blur-md rounded-3xl p-8 shadow-xl border border-white/25">
      <div class="text-center mb-8">
       <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-full flex items-center justify-center text-4xl mx-auto mb-4">
        ğŸ’¡
       </div>
       <h2 class="latin-heading text-3xl text-gray-800 mb-2">Petunjuk Penggunaan Portal</h2>
       <p class="latin-body text-gray-600">Panduan lengkap untuk memaksimalkan pembelajaran bahasa Arab</p>
      </div>
      <div class="guide-mobile-grid grid md:grid-cols-2 gap-6 md:gap-8"><!-- Cara Menggunakan -->
       <div class="guide-section-mobile space-y-4 md:space-y-6">
        <h3 class="latin-heading text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center"><span class="w-6 h-6 md:w-8 md:h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center text-xs md:text-sm font-bold mr-2 md:mr-3">1</span> Cara Menggunakan Portal</h3>
        <div class="space-y-3 md:space-y-4">
         <div class="bg-blue-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ“š Memilih Materi</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Klik menu "Materi" di bagian atas atau pilih kartu bab di dashboard. Setiap bab memiliki beberapa pelajaran yang harus dipelajari secara berurutan.</p>
         </div>
         <div class="bg-green-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ§ Mendengarkan Lagu</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Setiap bab memiliki lagu mufradat yang membantu menghapal kosakata. Dengarkan lagu sambil membaca teks Arab untuk hasil maksimal.</p>
         </div>
         <div class="bg-purple-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ“¹ Menonton Video</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Video pembelajaran dapat diputar langsung di portal. Tonton video sebelum mengerjakan latihan untuk pemahaman yang lebih baik.</p>
         </div>
         <div class="bg-amber-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">âœï¸ Mengerjakan Latihan</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Setiap bab diakhiri dengan latihan soal. Kerjakan dengan teliti dan jangan ragu untuk mengulang jika skor belum memuaskan.</p>
         </div>
        </div>
       </div><!-- Tips Pembelajaran -->
       <div class="guide-section-mobile space-y-4 md:space-y-6">
        <h3 class="latin-heading text-lg md:text-xl text-gray-800 mb-3 md:mb-4 flex items-center"><span class="w-6 h-6 md:w-8 md:h-8 bg-green-100 text-green-600 rounded-lg flex items-center justify-center text-xs md:text-sm font-bold mr-2 md:mr-3">2</span> Tips Pembelajaran Efektif</h3>
        <div class="space-y-3 md:space-y-4">
         <div class="bg-gradient-to-r from-red-50 to-pink-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ¯ Konsistensi</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Belajar sedikit tapi rutin lebih baik daripada belajar banyak sekali waktu. Luangkan 15-30 menit setiap hari untuk hasil optimal.</p>
         </div>
         <div class="bg-gradient-to-r from-yellow-50 to-orange-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ”„ Pengulangan</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Ulangi materi yang sudah dipelajari secara berkala. Ini membantu memindahkan informasi dari memori jangka pendek ke jangka panjang.</p>
         </div>
         <div class="bg-gradient-to-r from-indigo-50 to-blue-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ—£ï¸ Praktik</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Ucapkan kosakata dengan suara keras. Dengarkan lagu dan ikuti pelafalannya. Praktik berbicara membantu mengingat lebih baik.</p>
         </div>
         <div class="bg-gradient-to-r from-teal-50 to-cyan-50 p-3 md:p-4 rounded-xl">
          <h4 class="latin-body font-semibold text-gray-800 mb-2 text-sm md:text-base">ğŸ“ Catatan</h4>
          <p class="latin-body text-xs md:text-sm text-gray-700">Buat catatan kecil untuk kosakata yang sulit. Tulis contoh kalimat sendiri menggunakan kosakata yang baru dipelajari.</p>
         </div>
        </div>
       </div>
      </div><!-- Fitur Portal -->
      <div class="mt-8 bg-gradient-to-r from-gray-50 to-slate-50 p-6 rounded-2xl">
       <h3 class="latin-heading text-xl text-gray-800 mb-4 flex items-center"><span class="w-8 h-8 bg-gray-100 text-gray-600 rounded-lg flex items-center justify-center text-sm font-bold mr-3">3</span> Fitur-fitur Portal</h3>
       <div class="grid md:grid-cols-3 gap-4">
        <div class="text-center p-4">
         <div class="text-3xl mb-2">
          ğŸ“Š
         </div>
         <h4 class="latin-body font-semibold text-gray-800 mb-1">Progress Tracking</h4>
         <p class="latin-body text-xs text-gray-600">Pantau kemajuan belajar secara real-time</p>
        </div>
        <div class="text-center p-4">
         <div class="text-3xl mb-2">
          ğŸµ
         </div>
         <h4 class="latin-body font-semibold text-gray-800 mb-1">Lagu Mufradat</h4>
         <p class="latin-body text-xs text-gray-600">Belajar kosakata dengan cara yang menyenangkan</p>
        </div>
        <div class="text-center p-4">
         <div class="text-3xl mb-2">
          ğŸ“±
         </div>
         <h4 class="latin-body font-semibold text-gray-800 mb-1">Responsive Design</h4>
         <p class="latin-body text-xs text-gray-600">Dapat diakses di semua perangkat</p>
        </div>
       </div>
      </div>
      <div class="mt-8 text-center"><button onclick="backToDashboard()" class="btn-primary text-white py-3 px-8 rounded-xl latin-body font-semibold"> Mulai Belajar Sekarang! ğŸš€ </button>
      </div>
     </div>
    </div>
   </div>
  </main><!-- Footer -->
  <footer class="bg-white/60 backdrop-blur-md border-t border-white/40 mt-8 md:mt-16">
   <div class="footer-mobile-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-8">
    <div class="text-center space-y-4"><!-- Contact Teacher -->
     <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 md:p-6 rounded-2xl border border-green-100">
      <div class="footer-mobile-contact flex flex-col md:flex-row items-center justify-center space-y-3 md:space-y-0 md:space-x-4">
       <div class="flex items-center space-x-3">
        <div class="w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-green-400 to-emerald-600 rounded-full flex items-center justify-center text-xl md:text-2xl">
         ğŸ‘©â€ğŸ«
        </div>
        <div class="text-left">
         <h3 class="latin-heading text-base md:text-lg text-gray-800 font-semibold">Ada Pertanyaan?</h3>
         <p class="latin-body text-gray-600 text-xs md:text-sm">Tanya langsung ke guru</p>
        </div>
       </div><a href="https://wa.me/6285184926029" target="_blank" rel="noopener noreferrer" class="footer-mobile-whatsapp bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 md:px-6 py-2 md:py-3 rounded-xl latin-body font-semibold transition-all transform hover:scale-105 shadow-lg flex items-center space-x-2 text-sm md:text-base touch-manipulation"> <span class="emoji text-lg md:text-xl">ğŸ“±</span> <span>Hubungi Guru via WhatsApp</span> </a>
      </div>
     </div><!-- Copyright -->
     <div class="pt-4 md:pt-6 border-t border-gray-200">
      <p class="latin-body text-gray-600 text-xs sm:text-sm md:text-base">Â© 2025 ğŸ’ Belajar bahasa Arab lebih menyenangkan <span class="text-sky-600 font-semibold">@naikanah</span></p>
      <p class="latin-body text-gray-500 text-xs mt-2">Portal pembelajaran interaktif untuk menguasai bahasa Arab dengan mudah dan menyenangkan</p>
     </div>
    </div>
   </div>
  </footer>
  <script>
        // Configuration
        const defaultConfig = {
            site_title: "Portal Pelajar Bahasa Arab",
            welcome_message: "Assalamu'alaikum, petualang."
        };

        // Global state
        let currentStudent = null;
        let currentChapter = 1;
        let currentLesson = 1;
        let currentQuizQuestion = 0;
        let quizAnswers = [];
        let quizData = [];
        let studentProgress = [];

        // Chapter and lesson data
        const chapters = {
            1: {
                title: "Bab 1: Isim Tafdil",
                subtitle: "Kata Perbandingan dalam Bahasa Arab",
                lessons: [
                    {
                        title: "Pengertian & Ciri-ciri",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Pengertian Isim Tafdil</h3>
                            <div class="bg-sky-50 p-6 rounded-2xl mb-6">
                                <p class="latin-body text-lg text-gray-700 mb-4">
                                    <strong>Isim Tafdil</strong> adalah kata yang memiliki makna "lebih" atau "paling" mengikuti pola:
                                </p>
                                <div class="arabic-text text-center text-3xl text-sky-600 bg-white p-4 rounded-xl">
                                    Ø£ÙÙ’Ø¹ÙÙ„Ù
                                </div>
                            </div>
                            
                            <h4 class="latin-heading text-xl text-gray-800 mb-4">3 Ciri-ciri Khusus:</h4>
                            <div class="space-y-4">
                                <div class="flex items-start space-x-4 bg-red-50 p-4 rounded-xl">
                                    <span class="text-2xl">ğŸš«</span>
                                    <p class="latin-body text-gray-700">
                                        <strong>Tidak pernah menggunakan tanwin</strong> dalam keadaan apapun
                                    </p>
                                </div>
                                <div class="flex items-start space-x-4 bg-blue-50 p-4 rounded-xl">
                                    <span class="text-2xl">ğŸ”„</span>
                                    <p class="latin-body text-gray-700">
                                        <strong>Tidak terikat dengan jenis isim</strong> yang disifati
                                        <br><span class="arabic-text text-blue-600">Ø§ÙÙ„Ù’ÙƒÙØªÙØ§Ø¨Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù</span> dan <span class="arabic-text text-blue-600">Ø§ÙÙ„Ù’Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù</span>
                                    </p>
                                </div>
                                <div class="flex items-start space-x-4 bg-green-50 p-4 rounded-xl">
                                    <span class="text-2xl">ğŸ“</span>
                                    <p class="latin-body text-gray-700">
                                        <strong>Mengikuti pola</strong> <span class="arabic-text text-green-600">Ø£ÙÙÙ’Ø¹ÙÙ„Ù</span> (af'alu)
                                    </p>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Contoh Mufradat",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Kosakata Isim Tafdil</h3>
                            <div class="grid md:grid-cols-2 gap-4">
                                ${[
                                    ['Ø·ÙÙˆÙÙŠÙ’Ù„ÙŒ', 'panjang', 'Ø£ÙØ·Ù’ÙˆÙÙ„Ù', 'lebih panjang'],
                                    ['Ù‚ÙØµÙÙŠÙ’Ø±ÙŒ', 'pendek', 'Ø£ÙÙ‚Ù’ØµÙØ±Ù', 'lebih pendek'],
                                    ['ÙƒÙØ¨ÙÙŠÙ’Ø±ÙŒ', 'besar', 'Ø§ÙÙƒÙ’Ø¨ÙØ±Ù', 'lebih besar'],
                                    ['ØµÙØºÙÙŠÙ’Ø±ÙŒ', 'kecil', 'Ø£ÙØµÙ’ØºÙØ±Ù', 'lebih kecil'],
                                    ['ÙƒÙØ«ÙÙŠÙ’Ø±ÙŒ', 'banyak', 'Ø£ÙÙƒÙ’Ø«ÙØ±Ù', 'lebih banyak'],
                                    ['Ø¹ÙÙ…ÙÙŠÙ’Ù‚ÙŒ', 'dalam', 'Ø£ÙØ¹Ù’Ù…ÙÙ‚Ù', 'lebih dalam'],
                                    ['Ø³ÙÙ‡Ù’Ù„ÙŒ', 'mudah', 'Ø£ÙØ³Ù’Ù‡ÙÙ„Ù', 'lebih mudah'],
                                    ['Ø¨ÙØ¹ÙÙŠÙ’Ø¯ÙŒ', 'jauh', 'Ø£ÙØ¨Ù’Ø¹ÙØ¯Ù', 'lebih jauh'],
                                    ['Ù‚ÙØ±ÙÙŠÙ’Ø¨ÙŒ', 'dekat', 'Ø£ÙÙ‚Ù’Ø±ÙØ¨Ù', 'lebih dekat'],
                                    ['Ø¶ÙØ¹ÙÙŠÙ’ÙÙ', 'lemah', 'Ø£ÙØ¶Ù’Ø¹ÙÙÙ', 'lebih lemah']
                                ].map(([arabic1, indo1, arabic2, indo2]) => `
                                    <div class="bg-gradient-to-r from-sky-50 to-blue-50 p-4 rounded-xl border-l-4 border-sky-400">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="arabic-text text-xl text-gray-1000">${arabic1}</span>
                                            <span class="latin-body text-gray-600">${indo1}</span>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="arabic-text text-xl text-sky-800 font-bold">${arabic2}</span>
                                            <span class="latin-body text-sky-700 font-semibold">${indo2}</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="mt-8 bg-gradient-to-r from-purple-100 to-pink-100 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-gray-800 mb-3">ğŸµ Lagu Mufradat Isim Tafdil</h4>
                                <p class="latin-body text-gray-700 mb-4">
                                    Tonton lagu ini untuk memudahkan menghapal kosakata Isim Tafdil!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/CNvvsR0FtVA?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Lagu Mufradat Isim Tafdil"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Lagu: Mufradat Isim Tafdil untuk memudahkan menghapal</p>
                                </div>
                            </div>
                            
                            <div class="mt-6 bg-amber-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-gray-800 mb-3"><span class="emoji">ğŸ’¡</span> Tips Menghapal:</h4>
                                <p class="latin-body text-gray-700">
                                    Perhatikan pola <span class="arabic-text text-amber-600">Ø£ÙÙÙ’Ø¹ÙÙ„Ù</span> selalu dimulai dengan huruf alif dan fathah, 
                                    diikuti huruf asli kata dengan sukun, lalu huruf ketiga dengan fathah, dan diakhiri dhammah.
                                </p>
                            </div>
                        `
                    },
                    {
                        title: "Contoh Kalimat",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Contoh Kalimat Sehari-hari</h3>
                            
                            <div class="bg-gradient-to-r from-red-100 to-pink-100 p-4 md:p-6 rounded-2xl mb-6 md:mb-8">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸ“¹ Video Pembelajaran Isim Tafdil</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Tonton video pembelajaran untuk memahami Isim Tafdil dengan lebih baik!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
                                        <iframe 
                                            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                                            src="https://www.youtube.com/embed/eT0zRmw5Wzw?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Video Pembelajaran Isim Tafdil"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Video: Penjelasan lengkap tentang Isim Tafdil dan penggunaannya</p>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-2xl mb-8">
                                <h4 class="latin-heading text-xl text-gray-800 mb-4 flex items-center">
                                    <span class="text-2xl mr-3">ğŸ’¬</span>
                                    Dialog Hasan dan Khalid
                                </h4>
                                <div class="bg-white p-6 rounded-xl">
                                    <div class="space-y-4">
                                        <div class="flex items-start space-x-4">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm">H</div>
                                            <div class="flex-1">
                                                <div class="bg-blue-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ø§ÙÙ†Ù’Ø¸ÙØ±Ù’ ÙŠÙØ§ Ø®ÙØ§Ù„ÙØ¯Ù! Ø¬ÙØ³Ù’Ù…ÙÙƒÙ ÙƒÙØ¨ÙÙŠØ±ÙŒ Ø¬ÙØ¯Ù‹Ù‘Ø§</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">Unzhur yÄ KhÄlid! Jismuka kabÄ«run jiddan</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Lihat Khalid! Tubuhmu besar sekali</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4 flex-row-reverse">
                                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">K</div>
                                            <div class="flex-1">
                                                <div class="bg-green-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ù†ÙØ¹ÙÙ…Ù’ØŒ Ø£Ø­Ù’Ø³ÙÙ†Ù’ØªÙ. Ù„ÙÙƒÙÙ†Ù’ Ø¬ÙØ³Ù’Ù…Ù Ø£ÙØ¨ÙÙŠ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ Ø¬ÙØ³Ù’Ù…ÙÙŠ</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">Na'am, ahsanta. LÄkin jismu abi akbaru min jismÄ«</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Ya, benar. Tapi tubuh ayahku lebih besar dari tubuhku</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm">H</div>
                                            <div class="flex-1">
                                                <div class="bg-blue-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ø£ÙÙŠÙÙ‘Ù‡ÙÙ…ÙØ§ Ø£ÙÙ‚Ù’ÙˆÙÙ‰ØŸ Ø¬ÙØ³Ù’Ù…ÙÙƒÙ Ø£ÙÙˆÙ’ Ø¬ÙØ³Ù’Ù…Ù Ø£ÙØ¨ÙÙŠÙ’ÙƒÙØŸ</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">AyyuhumÄ aqwÄ? Jismuka aw jismu abÄ«ka?</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Mana yang lebih kuat? Tubuhmu atau tubuh ayahmu?</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4 flex-row-reverse">
                                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">K</div>
                                            <div class="flex-1">
                                                <div class="bg-green-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ø¬ÙØ³Ù’Ù…ÙÙŠÙ’ Ù‚ÙÙˆÙÙŠÙŒÙ‘ØŒ Ù„ÙÙƒÙÙ†Ù’ Ø¬ÙØ³Ù’Ù…Ù Ø£ÙØ¨ÙÙŠ Ø£ÙÙ‚Ù’ÙˆÙÙ‰</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">JismÄ« qawiyyun, lÄkin jismu abÄ« aqwÄ</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Tubuhku kuat, tapi tubuh ayahku lebih kuat</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm">H</div>
                                            <div class="flex-1">
                                                <div class="bg-blue-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ù‡ÙÙ„Ù’ Ø´ÙØ¹Ù’Ø±Ù Ø£ÙØ¨ÙÙŠÙƒÙ Ø·ÙÙˆÙÙŠÙ’Ù„ÙŒØŸ</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">Hal sya'ru abÄ«ka á¹­awÄ«lun?</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Apakah rambut ayahmu panjang?</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4 flex-row-reverse">
                                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">K</div>
                                            <div class="flex-1">
                                                <div class="bg-green-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ù„ÙØ§ØŒ Ø´ÙØ¹Ù’Ø±ÙÙ‡Ù Ù‚ÙØµÙÙŠØ±ÙŒØŒ Ù„ÙÙƒÙÙ†Ù’ Ø´ÙØ¹Ù’Ø±ÙÙŠ Ø£ÙÙ‚Ù’ØµÙØ±Ù</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">LÄ, sya'ruhu qaá¹£Ä«run, lÄkin sya'rÄ« aqá¹£aru</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Tidak, rambutnya pendek, tapi rambutku lebih pendek</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 bg-amber-50 p-4 rounded-xl">
                                    <h5 class="latin-heading text-sm font-semibold text-amber-700 mb-2">ğŸ’¡ Pelajaran dari Dialog:</h5>
                                    <p class="latin-body text-sm text-gray-700">
                                        Perhatikan penggunaan Isim Tafdil dalam percakapan: <span class="arabic-text text-amber-600">Ø£ÙÙƒÙ’Ø¨ÙØ±ÙØŒ Ø£ÙÙ‚Ù’ÙˆÙÙ‰ØŒ Ø£ÙÙ‚Ù’ØµÙØ±Ù</span> 
                                        untuk membandingkan tubuh, kekuatan, dan rambut.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="space-y-6">
                                ${[
                                    {
                                        arabic: 'Ù‡ÙØ°ÙØ§ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ Ø°ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ',
                                        latin: 'HÄÅ¼Ä al-bayti akbaru min Å¼Älika al-bayti',
                                        indo: 'Rumah ini lebih besar dari rumah itu'
                                    },
                                    {
                                        arabic: 'Ø§Ù„Ù’Ù‚ÙÙ„ÙÙ…Ù Ø£ÙØ·Ù’ÙˆÙÙ„Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù…ÙÙ…Ù’Ø­ÙØ§Ø©Ù',
                                        latin: 'Al-qalamu aá¹­walu min al-mimá¸¥Äti',
                                        indo: 'Pulpen lebih panjang dari penghapus'
                                    },
                                    {
                                        arabic: 'Ø§Ù„Ù’Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù Ø£ÙÙ‚Ù’Ø±ÙØ¨Ù Ù…ÙÙ†Ù Ø§Ù„Ù’Ù…ÙØ³Ù’Ø¬ÙØ¯Ù',
                                        latin: 'Al-madrasatu aqrabu min al-masjidi',
                                        indo: 'Sekolah lebih dekat dari masjid'
                                    },
                                    {
                                        arabic: 'Ù‡ÙØ°ÙØ§ Ø§Ù„Ø¯ÙÙ‘Ø±Ù’Ø³Ù Ø£ÙØ³Ù’Ù‡ÙÙ„Ù Ù…ÙÙ†Ù’ Ø°ÙÙ„ÙÙƒÙ Ø§Ù„Ø¯ÙÙ‘Ø±Ù’Ø³Ù',
                                        latin: 'HÄÅ¼Ä ad-darsu ashalu min dzÄlika ad-darsi',
                                        indo: 'Pelajaran ini lebih mudah dari pelajaran itu'
                                    },
                                    {
                                        arabic: 'Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù Ø£ÙÙƒÙ’Ø«ÙØ±Ù ÙØ§Ø¦ÙØ¯ÙØ© Ù…ÙÙ†Ù Ø§Ù„ØªÙÙ‘Ù„Ù’ÙÙØ§Ø²Ù',
                                        latin: 'Al-kitabu aká¹¡aru fÄ\'idatan min at-tilfÄzi',
                                        indo: 'Buku lebih bermanfaat dari televisi'
                                    }
                                ].map(sentence => `
                                    <div class="bg-white p-6 rounded-2xl shadow-md border-l-4 border-emerald-400">
                                        <div class="arabic-text text-2xl text-gray-800 mb-3 text-center">${sentence.arabic}</div>
                                        <div class="latin-body text-gray-600 italic mb-2 text-center">${sentence.latin}</div>
                                        <div class="latin-body text-gray-700 font-semibold text-center">${sentence.indo}</div>
                                    </div>
                                `).join('')}
                            </div>
                            <div class="mt-8 bg-green-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-gray-800 mb-3">ğŸ“‘ Struktur Kalimat:</h4>
                                <p class="latin-body text-gray-700 mb-2">
                                    <span class="arabic-text text-green-600">Ø§ÙØ³Ù’Ù…ÙŒ + Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ù…ÙÙ†Ù’ + Ø§ÙØ³Ù’Ù…ÙŒ</span>
                                </p>
                                <p class="latin-body text-gray-600">
                                    (Subjek + Isim Tafdil + min + Objek Pembanding)
                                </p>
                            </div>
                        `
                    },
                    {
                        title: "Latihan Soal",
                        isQuiz: true
                    }
                ]
            },
            2: {
                title: "Bab 2: Bentuk",
                subtitle: "Shapes & Forms dalam Bahasa Arab",
                lessons: [
                    {
                        title: "Kosakata Bentuk",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Nama-nama Bentuk di Sekitar Kita</h3>
                            <div class="grid md:grid-cols-3 gap-4 mb-8">
                                ${[
                                    ['Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ', 'kubus', 'ğŸ²'],
                                    ['Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ', 'lingkaran', 'â­•'],
                                    ['ÙƒÙØ±ÙÙˆÙÙŠÙŒÙ‘', 'bulat', 'âš½'],
                                    ['Ù†ÙØ¬Ù’Ù…ÙØ©ÙŒ', 'bintang', 'â­'],
                                    ['Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ', 'segitiga', 'ğŸ”º'],
                                    ['Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ', 'persegi panjang', 'ğŸ“±'],
                                    ['Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ', 'persegi', 'â¬œ'],
                                    ['Ù…ÙØ®Ù’Ø±ÙÙˆÙ’Ø·ÙŒ', 'kerucut', 'ğŸ—»'],
                                    ['Ø£ÙØ³Ù’Ø·ÙÙˆÙØ§Ù†ÙÙŠÙŒÙ‘', 'tabung', 'ğŸ¥«']
                                ].map(([arabic, indo, emoji]) => `
                                    <div class="bg-gradient-to-br from-purple-50 to-indigo-50 p-6 rounded-2xl text-center border-2 border-purple-100 hover:border-purple-300 transition-all">
                                        <div class="text-4xl mb-3">${emoji}</div>
                                        <div class="arabic-text text-xl text-gray-800 mb-2">${arabic}</div>
                                        <div class="latin-body text-purple-600 font-semibold">${indo}</div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="bg-gradient-to-r from-purple-100 to-pink-100 p-4 md:p-6 rounded-2xl">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸµ Lagu Bentuk-bentuk</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Dengarkan lagu ini untuk memudahkan menghapal nama-nama bentuk!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/GazglNz6RYM?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Lagu Mufradat Bentuk"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Lagu: Mufradat bentuk-bentuk untuk memudahkan menghapal</p>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Contoh Kalimat",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Muzakkar & Muannats dalam Kalimat Bentuk</h3>
                            
                            <div class="bg-gradient-to-r from-purple-100 to-indigo-100 p-4 md:p-6 rounded-2xl mb-6 md:mb-8">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸ“¹ Video Pembelajaran Bentuk</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Tonton video pembelajaran untuk memahami bentuk-bentuk dalam bahasa Arab!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/BNaAljYR7Jo?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Video Pembelajaran Bentuk"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Video: Penjelasan lengkap tentang bentuk-bentuk dan penggunaannya</p>
                                </div>
                            </div>
                            
                            <div class="bg-blue-50 p-6 rounded-2xl mb-8">
                                <h4 class="latin-heading text-xl text-gray-800 mb-4">Konsep Muzakkar dan Muannats</h4>
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div class="bg-white p-4 rounded-xl">
                                        <h5 class="latin-heading text-lg text-blue-600 mb-2">Muzakkar (Ù…ÙØ°ÙÙƒÙÙ‘Ø±ÙŒ)</h5>
                                        <p class="latin-body text-gray-700">Kata benda laki-laki, tidak berakhiran ta marbuthah</p>
                                        <div class="arabic-text text-blue-600 mt-2">Ø§Ù„ÙƒÙØªÙØ§Ø¨Ù - Ø§Ù„Ø±ÙÙ‘Ù…ÙÙ‘Ø§Ù†Ù - Ø§Ù„Ø¨ÙØ±Ù’Ù…ÙÙŠÙ„Ù</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-xl">
                                        <h5 class="latin-heading text-lg text-pink-600 mb-2">Muannats (Ù…ÙØ¤ÙÙ†ÙÙ‘Ø«ÙŒ)</h5>
                                        <p class="latin-body text-gray-700">Kata benda perempuan, berakhiran ta marbuthah (Ø©)</p>
                                        <div class="arabic-text text-pink-600 mt-2">Ø§Ù„ÙƒÙØ±ÙÙ‘Ø§Ø³ÙØ©Ù - Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù - Ø§Ù„Ù…ÙØ¬ÙÙ„ÙØ©Ù</div>
                                    </div>
                                </div>
                            </div>

                            <h4 class="latin-heading text-xl text-gray-800 mb-4">Pola Kalimat dengan Ø§Ù„Ø´ÙÙ‘ÙƒÙ’Ù„</h4>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-2xl mb-8">
                                <h4 class="latin-heading text-xl text-gray-800 mb-4 flex items-center">
                                    <span class="text-2xl mr-3">ğŸ’¬</span>
                                    Narasi Percakapan tentang Bentuk
                                </h4>
                                <div class="bg-white p-6 rounded-xl">
                                    <div class="space-y-4">
                                        <div class="flex items-start space-x-4">
                                            <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold text-sm">A</div>
                                            <div class="flex-1">
                                                <div class="bg-blue-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ù‡ÙÙ„Ù Ø§Ù„Ø®ÙØ²ÙØ§Ù†ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ Ø£ÙÙŠÙ’Ø¶Ù‹Ø§ØŸ</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">Hal al-khizÄnatu shakluhÄ muka''abun ayá¸an?</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Apakah lemari bentuknya kubus juga?</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="flex items-start space-x-4 flex-row-reverse">
                                            <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-sm">B</div>
                                            <div class="flex-1">
                                                <div class="bg-green-50 p-4 rounded-xl">
                                                    <div class="arabic-text text-lg text-gray-800 mb-2">Ù†ÙØ¹ÙÙ…Ù’ØŒ Ø§Ù„Ø®ÙØ²ÙØ§Ù†ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ</div>
                                                    <div class="latin-body text-gray-600 text-sm italic">Na'am, al-khizÄnatu shakluha muka''abun</div>
                                                    <div class="latin-body text-gray-700 font-semibold">Ya, lemari bentuknya kubus</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 bg-amber-50 p-4 rounded-xl">
                                    <h5 class="latin-heading text-sm font-semibold text-amber-700 mb-2">ğŸ’¡ Cara Menjawab Pertanyaan Ù‡ÙÙ„Ù’:</h5>
                                    <div class="space-y-2">
                                        <p class="latin-body text-sm text-gray-700">
                                            <strong>Jawaban "Ya":</strong> <span class="arabic-text text-green-600">Ù†ÙØ¹ÙÙ…Ù’</span> + ulangi kalimat tanpa <span class="arabic-text">Ù‡ÙÙ„Ù’</span>
                                        </p>
                                        <p class="latin-body text-sm text-gray-700">
                                            <strong>Jawaban "Tidak":</strong> <span class="arabic-text text-red-600">Ù„ÙØ§</span> + kalimat negatif atau koreksi
                                        </p>
                                        <p class="latin-body text-sm text-gray-700">
                                            <strong>Contoh negatif:</strong> <span class="arabic-text text-red-600">Ù„ÙØ§ØŒ Ø§Ù„Ø®ÙØ²ÙØ§Ù†ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ</span> (Tidak, lemari bentuknya persegi panjang)
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="space-y-6 mb-8">
                                <div class="bg-pink-50 p-6 rounded-2xl">
                                    <h5 class="latin-heading text-lg text-pink-600 mb-3">Pola 1 (Muannats):</h5>
                                    <div class="bg-white p-4 rounded-xl mb-4">
                                        <p class="arabic-text text-center text-lg text-gray-800">Ø§Ø³Ù… Ù…Ø¤Ù†Ø« + Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ + ØµÙØ© Ù…Ø°ÙƒØ±</p>
                                    </div>
                                    <div class="space-y-3">
                                        ${[
                                            ['Ø§Ù„ÙƒÙØ±ÙÙ‘Ø§Ø³ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ', 'Buku tulis bentuknya persegi'],
                                            ['Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ', 'Jam bentuknya bulat'],
                                            ['Ø§Ù„Ø¹ÙØ¬ÙÙ„ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ Ø£ÙÙŠÙ’Ø¶Ù‹Ø§', 'Roda bentuknya bulat juga']
                                        ].map(([arabic, indo]) => `
                                            <div class="bg-white p-3 rounded-lg">
                                                <div class="arabic-text text-gray-800 mb-1">${arabic}</div>
                                                <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                <div class="bg-blue-50 p-6 rounded-2xl">
                                    <h5 class="latin-heading text-lg text-blue-600 mb-3">Pola 2 (Muzakkar):</h5>
                                    <div class="bg-white p-4 rounded-xl mb-4">
                                        <p class="arabic-text text-center text-lg text-gray-800">Ø§Ø³Ù… Ù…Ø°ÙƒØ± + Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù + ØµÙØ© Ù…Ø°ÙƒØ±</p>
                                    </div>
                                    <div class="space-y-3">
                                        ${[
                                            ['Ø§Ù„ÙƒÙØªÙØ§Ø¨Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ', 'Buku bentuknya persegi panjang'],
                                            ['Ø§Ù„Ø±ÙÙ‘Ù…ÙÙ‘Ø§Ù†Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù ÙƒÙØ±ÙÙˆÙÙŠÙŒÙ‘', 'Delima bentuknya bulat'],
                                            ['Ø§Ù„Ø¨ÙØ±Ù’Ù…ÙÙŠÙ„Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù Ø£ÙØ³Ù’Ø·ÙÙˆÙØ§Ù†ÙÙŠÙŒÙ‘', 'Tong bentuknya tabung']
                                        ].map(([arabic, indo]) => `
                                            <div class="bg-white p-3 rounded-lg">
                                                <div class="arabic-text text-gray-800 mb-1">${arabic}</div>
                                                <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-green-600 mb-3">Pola Kalimat Langsung (Tanpa Ø´ÙÙƒÙ’Ù„)</h4>
                                <div class="space-y-3">
                                    ${[
                                        ['Ø§Ù„ÙƒÙØ¹Ù’Ø¨ÙØ©Ù Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙØ©ÙŒ', 'Ka\'bah berbentuk kubus'],
                                        ['Ø§Ù„ÙƒÙØ±ÙØ©Ù ÙƒÙØ±ÙÙˆÙÙŠÙÙ‘Ø©ÙŒ', 'Bola berbentuk bulat']
                                    ].map(([arabic, indo]) => `
                                        <div class="bg-white p-3 rounded-lg">
                                            <div class="arabic-text text-gray-800 mb-1">${arabic}</div>
                                            <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="mt-4 p-3 bg-white rounded-lg">
                                    <p class="latin-body text-gray-700 text-sm">
                                        <strong>Catatan:</strong> Untuk muannats, bentuk sifat berubah menjadi muannats juga (ditambah ta marbuthah)
                                    </p>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Latihan Soal",
                        isQuiz: true
                    }
                ]
            },
            3: {
                title: "Bab 3: Warna",
                subtitle: "Colors dalam Bahasa Arab",
                lessons: [
                    {
                        title: "Kosakata Warna",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Nama-nama Warna dalam Bahasa Arab</h3>
                            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                                ${[
                                    ['Ø£ÙØ³Ù’ÙˆÙØ¯Ù', 'hitam', 'âš«', 'from-gray-800 to-black'],
                                    ['Ø£ÙØ¨Ù’ÙŠÙØ¶Ù', 'putih', 'âšª', 'from-gray-100 to-white border-2 border-gray-200'],
                                    ['Ø£ÙØ²Ù’Ø±ÙÙ‚Ù', 'biru', 'ğŸ”µ', 'from-blue-500 to-blue-700'],
                                    ['Ø¨ÙÙ†ÙÙ‘ÙŠÙŒÙ‘', 'coklat', 'ğŸ¤', 'from-amber-700 to-yellow-800'],
                                    ['Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘', 'abu-abu', 'âš™ï¸', 'from-gray-400 to-gray-600'],
                                    ['Ø£ÙØ­Ù’Ù…ÙØ±Ù', 'merah', 'ğŸ”´', 'from-red-500 to-red-700'],
                                    ['Ø£ÙØµÙ’ÙÙØ±Ù', 'kuning', 'ğŸŸ¡', 'from-yellow-400 to-yellow-600'],
                                    ['Ø£ÙØ®Ù’Ø¶ÙØ±Ù', 'hijau', 'ğŸŸ¢', 'from-green-500 to-green-700']
                                ].map(([arabic, indo, emoji, gradient]) => `
                                    <div class="bg-gradient-to-br ${gradient} p-6 rounded-2xl text-center shadow-lg hover:shadow-xl transition-all">
                                        <div class="text-4xl mb-3">${emoji}</div>
                                        <div class="arabic-text text-xl ${gradient.includes('white') ? 'text-gray-800' : 'text-white'} mb-2 font-bold">${arabic}</div>
                                        <div class="latin-body ${gradient.includes('white') ? 'text-gray-600' : 'text-white'} font-semibold">${indo}</div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="bg-gradient-to-r from-red-100 via-yellow-100 to-green-100 p-4 md:p-6 rounded-2xl mb-6 md:mb-8">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸµ Lagu Mufradat Warna</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Dengarkan lagu ini dengan nada ceria untuk menghapal warna-warna!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/55GRyfQG_oM?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Lagu Mufradat Warna"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Lagu: Mufradat warna-warna untuk memudahkan menghapal</p>
                                </div>
                            </div>

                            <div class="bg-blue-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-blue-600 mb-3">ğŸ’¡ Tips Menghapal Warna</h4>
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-xl">ğŸ”´</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Ø£ÙØ­Ù’Ù…ÙØ±Ù</strong> - Ingat "Ahmad merah" untuk menghapal warna merah
                                        </p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-xl">ğŸŸ¡</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Ø£ÙØµÙ’ÙÙØ±Ù</strong> - "Asfar" mirip dengan "safar" (perjalanan) dengan matahari kuning
                                        </p>
                                    </div>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-xl">ğŸŸ¢</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Ø£ÙØ®Ù’Ø¶ÙØ±Ù</strong> - "Akhdar" seperti "hijau daun yang segar"
                                        </p>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Contoh Kalimat",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Penggunaan Pola Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù dan Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§</h3>
                            
                            <div class="bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-2xl mb-8">
                                <h4 class="latin-heading text-xl text-gray-800 mb-4">Konsep Dasar Warna dalam Kalimat</h4>
                                <div class="grid md:grid-cols-2 gap-6">
                                    <div class="bg-white p-4 rounded-xl">
                                        <h5 class="latin-heading text-lg text-blue-600 mb-2">Ù„ÙÙˆÙ†ÙÙ‡Ù (Warnanya - Muzakkar)</h5>
                                        <p class="latin-body text-gray-700 mb-2">Digunakan untuk kata benda muzakkar (laki-laki)</p>
                                        <div class="arabic-text text-blue-600">Ø§Ù„ÙƒÙØªÙØ§Ø¨Ù - Ø§Ù„Ù‚ÙÙ„ÙÙ…Ù - Ø§Ù„Ø¨ÙÙŠÙ’ØªÙ</div>
                                    </div>
                                    <div class="bg-white p-4 rounded-xl">
                                        <h5 class="latin-heading text-lg text-pink-600 mb-2">Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ (Warnanya - Muannats)</h5>
                                        <p class="latin-body text-gray-700 mb-2">Digunakan untuk kata benda muannats (perempuan)</p>
                                        <div class="arabic-text text-pink-600">Ø§Ù„Ø³ÙÙ‘ÙŠÙÙ‘Ø§Ø±ÙØ©Ù - Ø§Ù„Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù - Ø§Ù„ÙˆÙØ±Ù’Ø¯ÙØ©Ù</div>
                                    </div>
                                </div>
                            </div>

                            <h4 class="latin-heading text-xl text-gray-800 mb-6">Pola Kalimat dengan Ù„ÙÙˆÙ’Ù†Ù</h4>
                            
                            <div class="space-y-6 mb-8">
                                <div class="bg-blue-50 p-6 rounded-2xl">
                                    <h5 class="latin-heading text-lg text-blue-600 mb-3">Pola 1 (Muzakkar): Ø§Ø³Ù… Ù…Ø°ÙƒØ± + Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù + ØµÙØ©</h5>
                                    <div class="space-y-4">
                                        ${[
                                            ['Ø§Ù„ÙƒÙØªÙØ§Ø¨Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù Ø£ÙØ­Ù’Ù…ÙØ±Ù', 'Buku warnanya merah', 'ğŸ“•'],
                                            ['Ø§Ù„Ù‚ÙÙ„ÙÙ…Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù Ø£ÙØ²Ù’Ø±ÙÙ‚Ù', 'Pulpen warnanya biru', 'ğŸ–Šï¸'],
                                            ['Ø§Ù„Ø¨ÙÙŠÙ’ØªÙ Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù Ø£ÙØ¨Ù’ÙŠÙØ¶Ù', 'Rumah warnanya putih', 'ğŸ '],
                                            ['Ø§Ù„Ø­ÙØ§Ø³ÙØ¨Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù Ø£ÙØ³Ù’ÙˆÙØ¯Ù', 'Komputer warnanya hitam', 'ğŸ’»']
                                        ].map(([arabic, indo, emoji]) => `
                                            <div class="bg-white p-4 rounded-lg flex items-center space-x-4">
                                                <span class="text-2xl">${emoji}</span>
                                                <div class="flex-1">
                                                    <div class="arabic-text text-gray-1200 mb-1">${arabic}</div>
                                                    <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                <div class="bg-pink-50 p-6 rounded-2xl">
                                    <h5 class="latin-heading text-lg text-pink-600 mb-3">Pola 2 (Muannats): Ø§Ø³Ù… Ù…Ø¤Ù†Ø« + Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ + ØµÙØ©</h5>
                                    <div class="space-y-4">
                                        ${[
                                            ['Ø§Ù„Ø³ÙÙ‘ÙŠÙÙ‘Ø§Ø±ÙØ©Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ Ø£ÙØ­Ù’Ù…ÙØ±Ù', 'Mobil warnanya merah', 'ğŸš—'],
                                            ['Ø§Ù„Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ Ø¨ÙÙ†ÙÙ‘ÙŠÙŒÙ‘', 'Tas warnanya coklat', 'ğŸ‘œ'],
                                            ['Ø§Ù„ÙˆÙØ±Ù’Ø¯ÙØ©Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ Ø£ÙØ­Ù’Ù…ÙØ±Ù', 'Bunga mawar warnanya merah', 'ğŸŒ¹'],
                                            ['Ø§Ù„Ø´ÙÙ‘Ø¬ÙØ±ÙØ©Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ Ø£ÙØ®Ù’Ø¶ÙØ±Ù', 'Pohon warnanya hijau', 'ğŸŒ³']
                                        ].map(([arabic, indo, emoji]) => `
                                            <div class="bg-white p-4 rounded-lg flex items-center space-x-4">
                                                <span class="text-2xl">${emoji}</span>
                                                <div class="flex-1">
                                                    <div class="arabic-text text-gray-800 mb-1">${arabic}</div>
                                                    <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>

                            <div class="bg-green-50 p-6 rounded-2xl mb-6">
                                <h4 class="latin-heading text-lg text-green-600 mb-3">Pola Kalimat Langsung (Tanpa Ù„ÙÙˆÙ’Ù†Ù)</h4>
                                <div class="space-y-3">
                                    ${[
                                        ['Ø§Ù„Ø³Ù‘Ù…ÙØ§Ø¡Ù Ø²ÙØ±Ù’Ù‚ÙØ§Ø¡Ù', 'Langit biru', 'â˜ï¸'],
                                        ['Ø§Ù„Ø«ÙÙ‘Ù„Ù’Ø¬Ù Ø£ÙØ¨Ù’ÙŠÙØ¶Ù', 'Salju putih', 'â›„'],
                                        ['Ø§Ù„Ø´ÙÙ‘Ù…Ù’Ø³Ù ØµÙÙÙ’Ø±ÙØ§Ø¡Ù', 'Matahari kuning', 'â˜€ï¸']
                                    ].map(([arabic, indo, emoji]) => `
                                        <div class="bg-white p-3 rounded-lg flex items-center space-x-3">
                                            <span class="text-xl">${emoji}</span>
                                            <div class="flex-1">
                                                <div class="arabic-text text-gray-800 mb-1">${arabic}</div>
                                                <div class="latin-body text-gray-600 text-sm">${indo}</div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-pink-50 to-purple-50 p-6 rounded-2xl mb-6">
                                <h4 class="latin-heading text-lg text-pink-600 mb-3">ğŸ“‹ Kosakata Warna Muannats (Ù…Ø¤Ù†Ø«)</h4>
                                <p class="latin-body text-gray-700 mb-4 text-sm">
                                    Untuk kata benda muannats, kata sifat warna juga harus berubah menjadi muannats dengan menambahkan <strong>Ø§Ø¡</strong> di akhir:
                                </p>
                                <div class="grid md:grid-cols-2 gap-4">
                                    ${[
                                        ['Ø£ÙØ­Ù’Ù…ÙØ±Ù', 'Ø­ÙÙ…Ù’Ø±ÙØ§Ø¡Ù', 'merah (muannats)', 'ğŸ”´'],
                                        ['Ø£ÙØµÙ’ÙÙØ±Ù', 'ØµÙÙÙ’Ø±ÙØ§Ø¡Ù', 'kuning (muannats)', 'ğŸŸ¡'],
                                        ['Ø£ÙØ®Ù’Ø¶ÙØ±Ù', 'Ø®ÙØ¶Ù’Ø±ÙØ§Ø¡Ù', 'hijau (muannats)', 'ğŸŸ¢'],
                                        ['Ø£ÙØ²Ù’Ø±ÙÙ‚Ù', 'Ø²ÙØ±Ù’Ù‚ÙØ§Ø¡Ù', 'biru (muannats)', 'ğŸ”µ'],
                                        ['Ø£ÙØ¨Ù’ÙŠÙØ¶Ù', 'Ø¨ÙÙŠÙ’Ø¶ÙØ§Ø¡Ù', 'putih (muannats)', 'âšª'],
                                        ['Ø£ÙØ³Ù’ÙˆÙØ¯Ù', 'Ø³ÙÙˆÙ’Ø¯ÙØ§Ø¡Ù', 'hitam (muannats)', 'âš«']
                                    ].map(([muzakkar, muannats, indo, emoji]) => `
                                        <div class="bg-white p-4 rounded-xl border-l-4 border-pink-400">
                                            <div class="flex items-center space-x-3 mb-2">
                                                <span class="text-2xl">${emoji}</span>
                                                <div class="flex-1">
                                                    <div class="flex justify-between items-center mb-1">
                                                        <span class="arabic-text text-gray-1200 text-sm line-through">${muzakkar}</span>
                                                        <span class="text-xs text-gray-800">Ù…ÙØ°ÙÙƒÙÙ‘Ø±ÙŒ</span>
                                                    </div>
                                                    <div class="flex justify-between items-center">
                                                        <span class="arabic-text text-pink-1200 text-lg font-bold">${muannats}</span>
                                                        <span class="text-xs text-pink-800">Ù…Ø¤Ù†Ø«</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="latin-body text-gray-600 text-sm font-semibold">${indo}</div>
                                        </div>
                                    `).join('')}
                                </div>
                                <div class="mt-4 bg-white p-4 rounded-xl">
                                    <h5 class="latin-heading text-sm font-semibold text-purple-700 mb-2">ğŸ“Œ Contoh Penggunaan:</h5>
                                    <div class="space-y-2">
                                        ${[
                                            ['Ø§Ù„ÙˆÙØ±Ù’Ø¯ÙØ©Ù Ø­ÙÙ…Ù’Ø±ÙØ§Ø¡Ù', 'Bunga mawar merah', 'ğŸŒ¹'],
                                            ['Ø§Ù„Ø³ÙÙ‘ÙŠÙÙ‘Ø§Ø±ÙØ©Ù Ø²ÙØ±Ù’Ù‚ÙØ§Ø¡Ù', 'Mobil biru', 'ğŸš—'],
                                            ['Ø§Ù„Ø´ÙÙ‘Ø¬ÙØ±ÙØ©Ù Ø®ÙØ¶Ù’Ø±ÙØ§Ø¡Ù', 'Pohon hijau', 'ğŸŒ³'],
                                            ['Ø§Ù„ÙƒÙØ±ÙÙ‘Ø§Ø³ÙØ©Ù ØµÙÙÙ’Ø±ÙØ§Ø¡Ù', 'Buku tulis kuning', 'ğŸ“’'],
                                            ['Ø§Ù„Ø­ÙÙ‚ÙÙŠØ¨ÙØ©Ù Ø³ÙÙˆÙ’Ø¯ÙØ§Ø¡Ù', 'Tas hitam', 'ğŸ‘œ'],
                                            ['Ø§Ù„ÙˆÙØ±ÙÙ‚ÙØ©Ù Ø¨ÙÙŠÙ’Ø¶ÙØ§Ø¡Ù', 'Kertas putih', 'ğŸ“„']
                                        ].map(([arabic, indo, emoji]) => `
                                            <div class="flex items-center space-x-2 bg-purple-50 p-2 rounded-lg">
                                                <span class="text-lg">${emoji}</span>
                                                <div class="flex-1">
                                                    <span class="arabic-text text-gray-800 text-sm">${arabic}</span>
                                                    <span class="latin-body text-gray-600 text-xs ml-2">â†’ ${indo}</span>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-4 md:p-6 rounded-2xl">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸ“¹ Video Pembelajaran Warna</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Tonton video pembelajaran untuk memahami warna-warna dalam bahasa Arab!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/gcy-b0KsPNo?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Video Pembelajaran Warna"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Video: Penjelasan lengkap tentang warna-warna dan penggunaannya</p>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Latihan Soal",
                        isQuiz: true
                    }
                ]
            },
            4: {
                title: "Bab 4: Kalender Hijriah",
                subtitle: "Islamic Calendar dalam Bahasa Arab",
                lessons: [
                    {
                        title: "Nama-nama Bulan Hijriah",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">12 Bulan dalam Kalender Hijriah</h3>
                            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                                ${[
                                    ['Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ', 'Muharram', 'ğŸŒ™', '1'],
                                    ['ØµÙÙÙØ±ÙŒ', 'Safar', 'ğŸŒ’', '2'],
                                    ['Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù', 'Rabiul Awwal', 'ğŸŒ“', '3'],
                                    ['Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø¢Ø®ÙØ±Ù', 'Rabiul Akhir', 'ğŸŒ”', '4'],
                                    ['Ø¬ÙÙ…ÙØ§Ø¯Ù Ø§Ù„Ù’Ø£ÙˆÙÙ‘Ù„Ù', 'Jumadul Awwal', 'ğŸŒ•', '5'],
                                    ['Ø¬ÙÙ…ÙØ§Ø¯Ù Ø§Ù„Ø«ÙÙ‘Ø§Ù†ÙÙŠ', 'Jumadu Ats-tsani', 'ğŸŒ–', '6'],
                                    ['Ø±ÙØ¬ÙØ¨ÙŒ', 'Rajab', 'ğŸŒ—', '7'],
                                    ['Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù', 'Syaban', 'ğŸŒ˜', '8'],
                                    ['Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù', 'Ramadan', 'ğŸŒ™', '9'],
                                    ['Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ', 'Syawal', 'ğŸŒ›', '10'],
                                    ['Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù', 'Dzulqaidah', 'ğŸŒš', '11'],
                                    ['Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù', 'Dzulhijjah', 'ğŸ•‹', '12']
                                ].map(([arabic, indo, emoji, num]) => `
                                    <div class="bg-gradient-to-br from-amber-50 to-yellow-50 p-4 rounded-2xl text-center border-2 border-amber-100 hover:border-amber-300 transition-all">
                                        <div class="flex justify-between items-start mb-2">
                                            <span class="text-xs bg-amber-200 text-amber-800 px-2 py-1 rounded-full font-bold">${num}</span>
                                            <span class="text-2xl">${emoji}</span>
                                        </div>
                                        <div class="arabic-text text-lg text-gray-800 mb-2 font-bold">${arabic}</div>
                                        <div class="latin-body text-amber-700 font-semibold text-sm">${indo}</div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <div class="bg-gradient-to-r from-amber-100 to-yellow-100 p-4 md:p-6 rounded-2xl mb-6 md:mb-8">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸµ Lagu Mufradat Bulan Hijriah</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Dengarkan lagu ini untuk menghapal urutan bulan-bulan Hijriah!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/JDjhCxmRNqw?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Lagu Mufradat Bulan Hijriah"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Lagu: Mufradat bulan-bulan Hijriah untuk memudahkan menghapal</p>
                                </div>
                            </div>

                            <div class="bg-green-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-green-600 mb-3">ğŸ“‘ Fakta Menarik Kalender Hijriah</h4>
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">ğŸŒ™</span>
                                        <p class="latin-body text-gray-700">
                                            Kalender Hijriah dimulai dari peristiwa <strong>Hijrah</strong> Nabi Muhammad SAW dari Makkah ke Madinah
                                        </p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">ğŸ“…</span>
                                        <p class="latin-body text-gray-700">
                                            Satu tahun Hijriah terdiri dari <strong>354-355 hari</strong>, lebih pendek dari tahun Masehi
                                        </p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">ğŸ•‹</span>
                                        <p class="latin-body text-gray-700">
                                            Bulan <strong>Dzulhijjah</strong> adalah bulan pelaksanaan ibadah Haji di Makkah
                                        </p>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Contoh Kalimat",
                        content: `
                            <h3 class="latin-heading text-2xl text-gray-800 mb-6">Kalimat tentang Bulan-bulan Hijriah</h3>
                            
                            <div class="space-y-6 mb-8">
                                <div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-2xl">
                                    <h4 class="latin-heading text-xl text-green-600 mb-4">Bulan-bulan Istimewa dan Peristiwanya</h4>
                                    <div class="space-y-4">
                                        ${[
                                            ['Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù Ø´ÙÙ‡Ù’Ø±Ù Ø§Ù„ØµÙÙ‘ÙŠÙØ§Ù…Ù', 'Ramadan adalah bulan puasa', 'ğŸŒ™', 'bg-blue-50'],
                                            ['Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù Ù…ÙÙˆÙ’Ù„ÙØ¯Ù Ø§Ù„Ø±ÙÙ‘Ø³ÙÙˆÙ’Ù„Ù', 'Rabiul Awwal adalah kelahiran Rasul', 'ğŸŠ', 'bg-green-50'],
                                            [' ÙØ´ÙÙˆÙÙ‘Ø§Ù„ÙŒ ÙÙÙŠÙ’Ù‡Ù Ø¹ÙÙŠÙ’Ø¯Ù Ù„Ù’ÙÙØ·Ù’Ø±', 'Syawal di dalamnya ada Idul Fitri', 'ğŸ‰', 'bg-yellow-50'],
                                            ['Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù Ø´ÙÙ‡Ù’Ø±Ø§Ù„Ù’Ø­ÙØ¬Ù‘ÙØ©Ù‘', 'Dzulhijjah adalah bulan Haji', 'ğŸ•‹', 'bg-amber-50'],
                                            ['Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ Ø´ÙÙ‡Ù’Ø±ÙŒ Ø­ÙØ±ÙØ§Ù…ÙŒ', 'Muharram adalah bulan haram (suci)', 'ğŸŒ™', 'bg-purple-50'],
                                            ['Ø§Ù„Ø´ÙÙˆÙ’Ø±ÙØ§Ø¡Ù ÙÙÙŠÙ’Ù‡ÙØ§ Ù…ÙØ­ÙØ±ÙÙ‘Ù…', 'Asyura di bulan Muharram', 'ğŸ“¿', 'bg-indigo-50']
                                        ].map(([arabic, indo, emoji, bgColor]) => `
                                            <div class="${bgColor} p-4 rounded-xl border-l-4 border-green-400">
                                                <div class="flex items-center space-x-4">
                                                    <span class="text-3xl">${emoji}</span>
                                                    <div class="flex-1">
                                                        <div class="arabic-text text-xl text-gray-800 mb-2">${arabic}</div>
                                                        <div class="latin-body text-gray-600">${indo}</div>
                                                    </div>
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                <div class="bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-2xl">
                                    <h4 class="latin-heading text-xl text-blue-600 mb-4">Kalimat Sehari-hari tentang Bulan</h4>
                                    <div class="space-y-4">
                                        ${[
                                            ['Ù†ÙØ®Ù’Ù†Ù ÙÙÙŠ Ø´ÙÙ‡Ù’Ø±Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù', 'Kita sedang di bulan Ramadan'],
                                            ['Ø§Ù„ÙŠÙÙˆÙ’Ù…Ù Ø£ÙÙˆÙÙ‘Ù„ Ù…ÙØ­ÙØ±ÙÙ‘Ù…Ù', 'Hari ini tanggal satu Muharram'],
                                            ['Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù Ù‚ÙØ¨Ù’Ù„Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù', 'Syaban sebelum Ramadan'],
                                            ['Ø¨ÙØ¹Ù’Ø¯Ù Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù ï¿½ï¿½ÙÙˆÙÙ‘Ø§Ù„ÙŒ', 'Setelah Ramadan adalah Syawal'],
                                            ['Ø±ÙØ¬ÙØ¨ÙŒ Ø´ÙÙ‡Ù’Ø±Ù ÙƒÙØ±ÙÙŠÙ’Ù…', 'Rajab adalah bulan yang mulia']
                                        ].map(([arabic, indo]) => `
                                            <div class="bg-white p-4 rounded-lg">
                                                <div class="arabic-text text-lg text-gray-800 mb-2">${arabic}</div>
                                                <div class="latin-body text-gray-600">${indo}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-r from-yellow-100 to-amber-100 p-4 md:p-6 rounded-2xl mb-6">
                                <h4 class="latin-heading text-base md:text-lg text-gray-800 mb-3">ğŸ“¹ Video Pembelajaran Kalender Hijriah</h4>
                                <p class="latin-body text-sm md:text-base text-gray-700 mb-4">
                                    Tonton video pembelajaran untuk memahami kalender Hijriah dengan lengkap!
                                </p>
                                <div class="bg-white p-2 md:p-4 rounded-xl">
                                    <div class="aspect-video w-full video-container">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src="https://www.youtube.com/embed/K3WZ2pG7KlU?enablejsapi=1&origin=https://www.canva.com&rel=0&modestbranding=1&playsinline=1" 
                                            title="Video Pembelajaran Kalender Hijriah"
                                            frameborder="0" 
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                            allowfullscreen
                                            loading="lazy">
                                        </iframe>
                                    </div>
                                    <p class="latin-body text-xs md:text-sm text-gray-500 mt-2 text-center">Video: Penjelasan lengkap tentang kalender Hijriah dan sejarahnya</p>
                                </div>
                            </div>

                            <div class="bg-purple-50 p-6 rounded-2xl">
                                <h4 class="latin-heading text-lg text-purple-600 mb-3">ğŸ’¡ Tips Menghapal Bulan Hijriah</h4>
                                <div class="space-y-3">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">1ï¸âƒ£</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Hapal dengan lagu:</strong> Nyanyikan nama-nama bulan dengan nada yang mudah diingat
                                        </p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">2ï¸âƒ£</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Kaitkan dengan peristiwa:</strong> Ingat peristiwa penting di setiap bulan (Ramadan = puasa, Syawal = Lebaran)
                                        </p>
                                    </div>
                                    <div class="flex items-start space-x-3">
                                        <span class="text-xl">3ï¸âƒ£</span>
                                        <p class="latin-body text-gray-700">
                                            <strong>Latihan rutin:</strong> Sebutkan urutan bulan setiap hari sampai hafal
                                        </p>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Latihan Soal",
                        isQuiz: true
                    }
                ]
            }
        };

        // Quiz questions for each chapter
        const quizQuestions = {
            1: [
                {
                    question: "Apa pengertian Isim Tafdil?",
                    options: ["Kata yang berarti 'sama'", "Kata yang berarti 'lebih' atau 'paling'", "Kata yang berarti 'kurang'", "Kata yang berarti 'tidak'"],
                    correct: 1,
                    explanation: "Isim Tafdil adalah kata yang memiliki makna 'lebih' atau 'paling' mengikuti pola Ø£ÙÙÙ’Ø¹ÙÙ„Ù"
                },
                {
                    question: "Pola Isim Tafdil adalah:",
                    options: ["ÙÙØ¹ÙÙŠÙ„ÙŒ", "Ø£ÙÙÙ’Ø¹ÙÙ„Ù", "Ù…ÙÙÙ’Ø¹ÙÙˆÙ„ÙŒ", "ÙÙØ§Ø¹ÙÙ„ÙŒ"],
                    correct: 1,
                    explanation: "Isim Tafdil mengikuti pola Ø£ÙÙÙ’Ø¹ÙÙ„Ù (af'alu)"
                },
                {
                    question: "Ø£ÙÙƒÙ’Ø¨ÙØ±Ù artinya:",
                    options: ["Lebih kecil", "Lebih besar", "Sama besar", "Paling kecil"],
                    correct: 1,
                    explanation: "Ø£ÙÙƒÙ’Ø¨ÙØ±Ù berarti 'lebih besar'"
                },
                {
                    question: "Ciri khusus Isim Tafdil adalah:",
                    options: ["Selalu menggunakan tanwin", "Tidak pernah menggunakan tanwin", "Kadang menggunakan tanwin", "Harus menggunakan alif lam"],
                    correct: 1,
                    explanation: "Isim Tafdil tidak pernah menggunakan tanwin dalam keadaan apapun"
                },
                {
                    question: "Ø£ÙØ·Ù’ÙˆÙÙ„Ù artinya:",
                    options: ["Lebih pendek", "Lebih panjang", "Sama panjang", "Paling pendek"],
                    correct: 1,
                    explanation: "Ø£ÙØ·Ù’ÙˆÙÙ„Ù berarti 'lebih panjang'"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ù’Ø¨ÙÙŠÙ’ØªÙ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù Ø§Ù„Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù', kata Ù…ÙÙ†Ù’ berfungsi untuk:",
                    options: ["Menunjukkan tempat", "Menunjukkan waktu", "Menunjukkan perbandingan", "Menunjukkan kepemilikan"],
                    correct: 2,
                    explanation: "Ù…ÙÙ†Ù’ dalam Isim Tafdil berfungsi untuk menunjukkan objek yang dibandingkan"
                },
                {
                    question: " Ø£ÙØµÙ’ØºÙØ±Ù artinya:",
                    options: ["Lebih besar", "Lebih kecil", "Sama besar", "Paling besar"],
                    correct: 1,
                    explanation: "Ø£ÙØµÙ’ØºÙØ±Ù berarti 'lebih kecil'"
                },
                {
                    question: "Isim Tafdil tidak terikat dengan:",
                    options: ["Jenis isim yang disifati", "Pola kata", "Makna perbandingan", "Huruf Ø£ di awal"],
                    correct: 0,
                    explanation: "Isim Tafdil tidak terikat dengan jenis isim (muzakkar/muannats) yang disifati"
                },
                {
                    question: "Ø£ÙÙ‚Ù’Ø±ÙØ¨Ù artinya:",
                    options: ["Lebih jauh", "Lebih dekat", "Sama jauh", "Paling jauh"],
                    correct: 1,
                    explanation: "Ø£ÙÙ‚Ù’Ø±ÙØ¨Ù berarti 'lebih dekat'"
                },
                {
                    question: "Struktur kalimat Isim Tafdil adalah:",
                    options: ["Ø§ÙØ³Ù’Ù…ÙŒ + Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ù…ÙÙ†Ù’ + Ø§ÙØ³Ù’Ù…ÙŒ", "Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ø§ÙØ³Ù’Ù…ÙŒ + Ù…ÙÙ†Ù’ + Ø§ÙØ³Ù’Ù…ÙŒ", "Ø§ÙØ³Ù’Ù…ÙŒ + Ù…ÙÙ† + Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ø§ÙØ³Ù’Ù…ÙŒ", "Ù…ÙÙ†Ù’ + Ø§ÙØ³Ù’Ù…ÙŒ + Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ø§ÙØ³Ù’Ù…ÙŒ"],
                    correct: 0,
                    explanation: "Struktur kalimat Isim Tafdil: Ø§ÙØ³Ù’Ù…ÙŒ + Ø£ÙÙÙ’Ø¹ÙÙ„Ù + Ù…ÙÙ†Ù’ + Ø§ÙØ³Ù’Ù…ÙŒ"
                },
                {
                    question: "Ø£ÙØ³Ù’Ù‡ÙÙ„Ù artinya:",
                    options: ["Lebih sulit", "Lebih mudah", "Sama mudah", "Paling sulit"],
                    correct: 1,
                    explanation: "Ø£ÙØ³Ù’Ù‡ÙÙ„Ù berarti 'lebih mudah'"
                },
                {
                    question: "Apa arti kalimat: Ù‡ÙØ°ÙØ§ Ø§Ù„Ù’ÙŠÙÙŠÙ’ØªÙ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ Ø°ÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ø¨ÙÙŠÙ’ØªÙ",
                    options: ["Rumah ini lebih kecil dari rumah itu", "Rumah ini sama besar dengan rumah itu", "Rumah ini lebih besar dari rumah itu", "Rumah ini paling besar"],
                    correct: 2,
                    explanation: "Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ berarti 'lebih besar dari', jadi kalimat ini berarti 'Rumah ini lebih besar dari rumah itu'"
                },
                {
                    question: "Ø£ÙØ¨Ù’Ø¹ÙØ¯Ù artinya:",
                    options: ["Lebih dekat", "Lebih jauh", "Sama jauh", "Paling dekat"],
                    correct: 1,
                    explanation: "Ø£ÙØ¨Ù’Ø¹ÙØ¯Ù berarti 'lebih jauh'"
                },
                {
                    question: "Huruf pertama dalam pola Isim Tafdil selalu:",
                    options: ["Ø¨", "Øª", "Ø£", "Ù"],
                    correct: 2,
                    explanation: "Pola Isim Tafdil Ø£ÙÙÙ’Ø¹ÙÙ„Ù selalu dimulai dengan huruf alif (Ø£)"
                },
                {
                    question: "Ø£ÙÙƒÙ’Ø«ÙØ±Ù artinya:",
                    options: ["Lebih sedikit", "Lebih banyak", "Sama banyak", "Paling sedikit"],
                    correct: 1,
                    explanation: "Ø£ÙÙƒÙ’Ø¨ÙØ«ÙØ± berarti 'lebih banyak'"
                },
                {
                    question: "Dalam dialog, 'Ø¬ÙØ³Ù’Ù…Ù Ø£ÙØ¨ÙÙŠÙ’ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ Ø¬ÙØ³Ù’Ù…ÙÙŠÙ’' artinya:",
                    options: ["Tubuh ayahku lebih kecil dari tubuhku", "Tubuh ayahku lebih besar dari tubuhku", "Tubuh ayahku sama dengan tubuhku", "Tubuh ayahku paling besar"],
                    correct: 1,
                    explanation: "Ø¬ÙØ³Ù’Ù…Ù Ø£ÙØ¨ÙÙŠÙ’ Ø£ÙÙƒÙ’Ø¨ÙØ±Ù Ù…ÙÙ†Ù’ Ø¬ÙØ³Ù’Ù…ÙÙŠÙ’ berarti 'Tubuh ayahku lebih besar dari tubuhku'"
                },
                {
                    question: "Ø£ÙØ¹Ù’Ù…ÙÙ‚Ù artinya:",
                    options: ["Lebih dangkal", "Lebih dalam", "Sama dalam", "Paling dangkal"],
                    correct: 1,
                    explanation: "Ø£ÙØ¹Ù’Ù…ÙÙ‚Ù berarti 'lebih dalam'"
                },
                {
                    question: "Manakah yang bukan ciri Isim Tafdil?",
                    options: ["Tidak menggunakan tanwin", "Mengikuti pola Ø£ÙÙÙ’Ø¹ÙÙ„Ù", "Tidak terikat jenis isim", "Selalu berakhiran Ø©"],
                    correct: 3,
                    explanation: "Isim Tafdil tidak selalu berakhiran ta marbuthah (Ø©)"
                },
                {
                    question: "Ø£ÙØ¶Ù’Ø¹ÙÙÙ artinya:",
                    options: ["Lebih kuat", "Lebih lemah", "Sama lemah", "Paling kuat"],
                    correct: 1,
                    explanation: "Ø£ÙØ¶Ù’Ø¹ÙÙÙ berarti 'lebih lemah'"
                },
                {
                    question: "Apa arti kalimat: Ø§Ù„Ù’ÙƒÙØªÙØ§Ø¨Ù Ø£ÙÙƒÙ’Ø«ÙØ±Ù ÙÙØ§Ø¦ÙØ¯ÙØ© Ù…ÙÙ†Ù Ø§Ù„ØªÙÙ‘Ù„Ù’ÙÙØ§Ø²Ù",
                    options: ["Buku lebih mahal dari televisi", "Buku lebih bermanfaat dari televisi", "Buku lebih besar dari televisi", "Buku lebih berat dari televisi"],
                    correct: 1,
                    explanation: "Ø£ÙÙƒÙ’Ø«ÙØ±Ù ÙÙØ§Ø¦ÙØ¯ÙØ©Ù‹ berarti 'lebih bermanfaat', jadi kalimat ini berarti 'Buku lebih bermanfaat dari televisi'"
                }
            ],
            2: [
                {
                    question: "Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ artinya:",
                    options: ["Lingkaran", "Persegi", "Segitiga", "Persegi panjang"],
                    correct: 1,
                    explanation: "Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ berarti persegi atau bentuk bujur sangkar"
                },
                {
                    question: "Bentuk yang memiliki tiga sisi adalah:",
                    options: ["Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ", "Ù…ÙØ±ÙØ¨ÙØ¹ÙŒ", "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ", "Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ"],
                    correct: 0,
                    explanation: "Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ (segitiga) adalah bentuk yang memiliki tiga sisi"
                },
                {
                    question: "Ø£ÙØ³Ù’Ø·ÙÙˆÙØ§Ù†ÙÙŠÙŒÙ‘ artinya:",
                    options: ["Kubus", "Kerucut", "Bola", "Tabung"],
                    correct: 3,
                    explanation: "Ø£ÙØ³Ù’Ø·ÙÙˆÙØ§Ù†ÙÙŠÙŒÙ‘ berarti tabung atau silinder"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ù’ÙƒÙØ±ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ', kata 'Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§' digunakan karena Ø§Ù„ÙƒÙØ±ÙØ©Ù adalah:",
                    options: ["Muannats", "Muzakkar", "Jamak", "Mufrad"],
                    correct: 0,
                    explanation: "Ø§Ù„ÙƒØ±Ø© adalah muannats (berakhiran ta marbuthah), sehingga menggunakan Ø´ÙƒÙ„Ù‡Ø§"
                },
                {
                    question: "Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ artinya:",
                    options: ["Lingkaran", "Segitiga", "Kubus", "Kerucut"],
                    correct: 2,
                    explanation: "Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ berarti kubus atau bentuk dadu"
                },
                {
                    question: "Untuk menyebutkan kalimat 'bentuknya'  dalam muzakkar, kita menggunakan:",
                    options: ["Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§", "Ø´ÙÙƒÙ’Ù„ÙÙƒÙ", "Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù", "Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙÙ†ÙÙ‘"],
                    correct: 2,
                    explanation: "Untuk kata muzakkar, kita menggunakan Ø´ÙƒÙ„Ù‡ (bentuknya untuk laki-laki)"
                },
                {
                    question: "Ù†ÙØ¬Ù’Ù…ÙØ©ÙŒ artinya:",
                    options: ["Bulan", "Matahari", "Planet", "Bintang"],
                    correct: 3,
                    explanation: "Ù†ÙØ¬Ù’Ù…ÙØ©ÙŒ berarti bintang"
                },
                {
                    question: "ÙƒÙØ±ÙÙˆÙÙŠÙŒÙ‘ artinya:",
                    options: ["Bulat/bola", "Persegi", "Panjang", "Datar"],
                    correct: 0,
                    explanation: "ÙƒÙØ±ÙÙˆÙÙŠÙŒÙ‘ berarti bulat atau berbentuk bola"
                },
                {
                    question: "Dalam kalimat 'Ø§Ù„ÙƒÙØªÙØ§Ø¨Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ', kata Ø§ÙÙ„Ù’ÙƒÙØªÙØ§Ø¨Ù merupakan isim jenis:",
                    options: ["Muannats", "Jamak", "Muzakkar", "Mutsanna"],
                    correct: 2,
                    explanation: "Ø§Ù„ÙƒØªØ§Ø¨ adalah muzakkar (tidak berakhiran ta marbuthah)"
                },
                {
                    question: "Ù…ÙØ®Ù’Ø±ÙÙˆÙ’Ø·ÙŒ artinya:",
                    options: ["Tabung", "Kubus", "Bola", "Kerucut"],
                    correct: 3,
                    explanation: "Ù…ÙØ®Ù’Ø±ÙÙˆÙ’Ø·ÙŒ berarti kerucut"
                },
                {
                    question: "Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ artinya:",
                    options: ["Persegi panjang", "Persegi", "Lingkaran", "Segitiga"],
                    correct: 0,
                    explanation: "Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ berarti persegi panjang atau rectangle"
                },
                {
                    question: "Ciri kata muannats adalah:",
                    options: ["Berakhiran alif", "Berakhiran nun", "Berakhiran ta marbuthah (Ø©)", "Berakhiran mim"],
                    correct: 2,
                    explanation: "Kata muannats biasanya berakhiran ta marbuthah (Ø©)"
                },
                {
                    question: "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ artinya:",
                    options: ["Persegi", "Segitiga", "Persegi panjang", "Lingkaran/bulat"],
                    correct: 3,
                    explanation: " Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ berarti lingkaran atau bulat"
                },
                {
                    question: "Dalam pola kalimat langsung, 'Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙØ©ÙŒ', kata Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙØ©ÙŒ berubah menjadi muannats karena:",
                    options: ["Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù muzakkar", "Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù jamak", "Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù muannats", "Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù mutsanna"],
                    correct: 2,
                    explanation: "Ø§ÙÙ„Ù’ÙƒÙØ¹Ù’Ø¨ÙØ©Ù adalah muannats, sehingga sifatnya juga harus muannats (Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙØ©ÙŒ)"
                },
                {
                    question: "Bentuk yang tidak memiliki sudut adalah:",
                    options: ["Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ", "Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ", "Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ", "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ"],
                    correct: 3,
                    explanation: "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ (lingkaran) tidak memiliki sudut"
                },
                {
                    question: "Apa arti kalimat: Ø§Ù„ÙƒÙØ±ÙÙ‘Ø§Ø³ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ",
                    options: ["Buku tulis bentuknya bulat", "Buku tulis bentuknya persegi", "Buku tulis bentuknya segitiga", "Buku tulis bentuknya persegi panjang"],
                    correct: 1,
                    explanation: "Ø§Ù„ÙƒÙØ±ÙÙ‘Ø§Ø³ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ berarti 'Buku tulis bentuknya persegi'"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ', mengapa menggunakan Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§?",
                    options: ["Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù muzakkar", "Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù jamak", "Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù muannats", "Ø§Ù„Ø³ÙÙ‘Ø§Ø¹ÙØ©Ù mufrad"],
                    correct: 2,
                    explanation: "Ø§Ù„Ø³Ø§Ø¹Ø© adalah muannats (berakhiran ta marbuthah), sehingga menggunakan Ø´ÙƒÙ„Ù‡Ø§"
                },
                {
                    question: "Bentuk yang memiliki empat sisi sama panjang adalah:",
                    options: ["Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ", "Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ", "Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ", "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ"],
                    correct: 2,
                    explanation: "Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ (persegi) memiliki empat sisi yang sama panjang"
                },
                {
                    question: "Pola kalimat untuk menyebutkan 'bentuknya' dalam muzakkar adalah:",
                    options: ["Ø§ÙØ³Ù’Ù…ÙŒ Ù…ÙØ¤ÙÙ†ÙÙ‘Ø«ÙŒ + Ø´ÙÙƒÙ’Ù„ÙÙ‡ÙØ§ + ØµÙÙÙØ©ÙŒ", "Ø§ÙØ³Ù’Ù…ÙŒ + Ø´ÙÙƒÙ’Ù„ÙŒ + ØµÙÙÙØ©ÙŒ", "Ø§ÙØ³Ù’Ù…ÙŒ Ù…ÙØ°ÙÙƒÙÙ‘Ø±ÙŒ + Ø´ÙÙƒÙ’Ù„ÙÙ‡Ù + ØµÙÙÙØ©ÙŒ", "Ø´ÙÙƒÙ’Ù„ÙŒ + Ø§ÙØ³Ù’Ù…ÙŒ + ØµÙÙÙØ©ÙŒ"],
                    correct: 2,
                    explanation: "Untuk muzakkar: Ø§Ø³Ù… Ù…Ø°ÙƒØ± + Ø´ÙƒÙ„Ù‡ + ØµÙØ© Ù…Ø°ÙƒØ±"
                },
                {
                    question: "Yang termasuk bentuk tiga dimensi adalah:",
                    options: ["Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ", "Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ", "Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ", "Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ"],
                    correct: 3,
                    explanation: "Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ (kubus) adalah bentuk tiga dimensi"
                }
            ],
            3: [
                {
                    question: "Ø£ÙØ­Ù’Ù…ÙØ±Ù artinya:",
                    options: ["Hijau", "Biru", "Merah", "Kuning"],
                    correct: 2,
                    explanation: "Ø£ÙØ­Ù’Ù…ÙØ±Ù berarti merah"
                },
                {
                    question: "Warna hitam dalam bahasa Arab adalah:",
                    options: ["Ø£ÙØ³Ù’ÙˆÙØ¯Ù", "Ø£ÙØ¨Ù’ÙŠÙØ¶Ù", "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘", "Ø¨ÙÙ†ÙÙ‘ÙŠÙŒÙ‘"],
                    correct: 0,
                    explanation: "Ø£ÙØ³Ù’ÙˆÙØ¯Ù berarti hitam"
                },
                {
                    question: "Ø£ÙØµÙ’ÙÙØ±Ù artinya:",
                    options: ["Merah", "Hijau", "Biru", "Kuning"],
                    correct: 3,
                    explanation: "Ø£ÙØµÙ’ÙÙØ±Ù berarti kuning"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ù’ÙƒÙØªÙØ§Ø¨Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù Ø£ÙØ­Ù’Ù…ÙØ±Ù', kata 'Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù' digunakan karena Ø§ÙÙ„Ù’ÙƒÙØªÙØ§Ø¨Ù adalah:",
                    options: ["Muannats", "Jamak", "Muzakkar", "Mutsanna"],
                    correct: 2,
                    explanation: "Ø§ÙÙ„Ù’ÙƒÙØªÙØ§Ø¨Ù adalah muzakkar, sehingga menggunakan Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù"
                },
                {
                    question: "Ø£ÙØ®Ù’Ø¶ÙØ±Ù artinya:",
                    options: ["Biru", "Ungu", "Hijau", "Pink"],
                    correct: 2,
                    explanation: "Ø£ÙØ®Ù’Ø¶ÙØ±Ù berarti hijau"
                },
                {
                    question: "Untuk kata menyebutkan 'warnanya' dalam muannats, kita menggunakan:",
                    options: ["Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù", "Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙÙ…ÙØ§", "Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§", "Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙÙ…Ù’"],
                    correct: 2,
                    explanation: "Untuk kata muannats, kita menggunakan Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§"
                },
                {
                    question: "Ø£ÙØ¨Ù’ÙŠÙØ¶Ù artinya:",
                    options: ["Hitam", "Abu-abu", "Coklat", "Putih"],
                    correct: 3,
                    explanation: "Ø£ÙØ¨Ù’ÙŠÙØ¶Ù berarti putih"
                },
                {
                    question: " Ø£ÙØ³Ù…ÙØ±Ù artinya:",
                    options: ["Merah", "Coklat", "Kuning", "Hijau"],
                    correct: 1,
                    explanation: "Ø£ÙØ³Ù’Ù…ÙØ±Ù berarti coklat"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ø³ÙÙ‘ÙŠÙÙ‘Ø§Ø±ÙØ©Ù Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ Ø£ÙØ­Ù’Ù…ÙØ±Ù' kata Ø§ÙÙ„Ø³ÙÙ‘ÙŠÙÙ‘Ø§Ø±ÙØ©Ù isim jenis:",
                    options: ["Muzakkar", "Jamak", "Muannats", "Mutsanna"],
                    correct: 2,
                    explanation: "Ø§Ù„Ø³ÙŠØ§Ø±Ø© adalah muannats (berakhiran ta marbuthah)"
                },
                {
                    question: "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘ artinya:",
                    options: ["Hitam", "Putih", "Coklat", "Abu-abu"],
                    correct: 3,
                    explanation: "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘ berarti abu-abu"
                },
                {
                    question: "Pola kalimat untuk menyebutkan '... warnanya ... ' dalam muzakkar adalah:",
                    options: ["Ø§ÙØ³Ù’Ù…ÙŒ Ù…ÙØ¤ÙÙ†ÙÙ‘Ø«ÙŒ + Ù„ÙÙˆÙ’Ù†ÙÙ‡ÙØ§ + ØµÙÙÙØ©ÙŒ", "Ø§ÙØ³Ù’Ù…ÙŒ + Ù„ÙÙˆÙ’Ù†ÙŒ + ØµÙÙØ©ÙŒ ", "Ø§ÙØ³Ù’Ù…ÙŒ Ù…ÙØ°ÙÙƒÙÙ‘Ø±ÙŒ + Ù„ÙÙˆÙ’Ù†ÙÙ‡Ù + ØµÙÙÙØ©ÙŒ", "Ù„ÙÙˆÙ’Ù†ÙŒ + Ø§ÙØ³Ù’Ù…ÙŒ + ØµÙÙÙØ©ÙŒ"],
                    correct: 2,
                    explanation: "Untuk muzakkar: Ø§Ø³Ù… Ù…Ø°ÙƒØ± + Ù„ÙˆÙ†Ù‡ + ØµÙØ©"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ø´ÙÙ‘Ù…Ù’Ø³Ù ØµÙÙÙ’Ø±ÙØ§Ø¡Ù', mengapa tidak menggunakan Ù„ÙÙˆÙ’Ù†ÙŒ?",
                    options: ["Karena salah", "Karena jamak", "Karena pola langsung", "Karena dual"],
                    correct: 2,
                    explanation: "Ini adalah pola kalimat langsung tanpa menggunakan kata Ù„ÙÙˆÙ’Ù†ÙŒ"
                },
                {
                    question: "Warna yang cocok untuk daun adalah:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØµÙ’ÙÙØ±Ù", "Ø£ÙØ³Ù’ÙˆÙØ¯Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù"],
                    correct: 3,
                    explanation: "Ø£ÙØ®Ù’Ø¶ÙØ±Ù (hijau) adalah warna yang cocok untuk daun"
                },
                {
                    question: "Dalam lagu mufradat warna, urutan yang benar adalah:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù Ø£ÙØ³Ù’ÙˆÙØ¯Ù Ø£ÙØ¨Ù’ÙŠÙØ¶Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù Ø£ÙØµÙ’ÙÙØ±Ù Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØ³Ù’ÙˆÙØ¯Ù Ø£ÙØ¨Ù’ÙŠÙØ¶Ù‹ Ø£ÙØ³Ù’Ù…ÙØ±Ù", "Ø£ÙØ¨Ù’ÙŠÙØ¶Ù Ø£ÙØ³Ù’ÙˆÙØ¯Ù Ø±ÙÙ…ÙØ§ÙØ¯ÙŠÙ‘ÙŒ"],
                    correct: 2,
                    explanation: "Urutan dalam lagu: Ø£ÙØ³Ù’ÙˆÙØ¯Ù Ø£ÙØ¨Ù’ÙŠÙØ¶Ù Ø£ÙØ³Ù’Ù…ÙØ±Ù"
                },
                {
                    question: "Warna matahari biasanya:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù", "Ø£ÙØµÙ’ÙÙØ±", "Ø£ÙØ²Ù’Ø±ÙÙ‚Ù"],
                    correct: 2,
                    explanation: "Matahari biasanya berwarna Ø£ÙØµÙ’ÙÙØ±Ù (kuning)"
                },
                {
                    question: "Dalam kalimat 'Ø§ÙÙ„Ù’Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù Ø¨ÙÙ†ÙÙŠÙÙ‘Ø©Ù', kata Ø¨ÙÙ†ÙÙŠÙÙ‘Ø©ÙŒ berubah menjadi muannats karena:",
                    options: ["Ø§ÙÙ„Ù’Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù muzakkar", "Ø§ÙÙ„Ù’Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù jamak", "Ø§ÙÙ„Ù’Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù muannats", "Ø§ÙÙ„Ù’Ø­ÙÙ‚ÙÙŠÙ’Ø¨ÙØ©Ù mutsanna"],
                    correct: 2,
                    explanation: "Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© adalah muannats, sehingga sifatnya juga harus muannats"
                },
                {
                    question: "Warna yang berlawanan dengan Ø£ÙØ¨Ù’ÙŠÙØ¶Ù adalah:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù", "Ø£ÙØ³Ù’ÙˆÙØ¯Ù", "Ø£ÙØµÙ’ÙÙØ±Ù"],
                    correct: 2,
                    explanation: "Ø£ÙØ³Ù’ÙˆÙØ¯Ù (hitam) adalah lawan dari Ø£ÙØ¨Ù’ÙŠÙØ¶Ù (putih)"
                },
                {
                    question: "Untuk mengingat Ø£ÙØ­Ù’Ù…ÙØ±Ù, kita bisa mengingat:",
                    options: ["Ali hijau", "Ahmad merah", "Umar kuning", "Usman biru"],
                    correct: 1,
                    explanation: "Tips menghapal: 'Ahmad merah' untuk Ø£ÙØ­Ù’Ù…ÙØ±Ù"
                },
                {
                    question: "Warna langit biasanya:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØµÙ’ÙÙØ±Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù", "Ø£ÙØ²Ù’Ø±ÙÙ‚Ù"],
                    correct: 3,
                    explanation: "Langit biasanya berwarna Ø£ÙØ²Ù’Ø±ÙÙ‚Ù (biru)"
                },
                {
                    question: "Yang bukan termasuk warna dasar adalah:",
                    options: ["Ø£ÙØ­Ù’Ù…ÙØ±Ù", "Ø£ÙØµÙ’ÙÙØ±Ù", "Ø£ÙØ®Ù’Ø¶ÙØ±Ù", "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘"],
                    correct: 3,
                    explanation: "Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘ (abu-abu) bukan warna dasar, melainkan campuran hitam dan putih"
                }
            ],
            4: [
                {
                    question: "Bulan pertama dalam kalender Hijriah adalah:",
                    options: ["ØµÙÙÙØ±ÙŒ", "Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù", "Ù…Ø¬ÙØ±ÙÙ‘Ù…ÙŒ", "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù"],
                    correct: 2,
                    explanation: "Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ adalah bulan pertama dalam kalender Hijriah"
                },
                {
                    question: "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù adalah bulan ke:",
                    options: ["9", "8", "10", "11"],
                    correct: 0,
                    explanation: "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù adalah bulan ke-9 dalam kalender Hijriah"
                },
                {
                    question: "Bulan Haji dilaksanakan pada:",
                    options: ["Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù", "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ", "Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù", "Ø°ÙÙˆØ§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©"],
                    correct: 3,
                    explanation: "Haji dilaksanakan pada bulan Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù"
                },
                {
                    question: "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ adalah bulan yang di dalamnya terdapat:",
                    options: ["Puasa Ramadan", "Idul Adha", "Idul Fitri", "Maulid Nabi"],
                    correct: 2,
                    explanation: "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ adalah bulan yang di dalamnya terdapat Idul Fitri"
                },
                {
                    question: "Bulan kelahiran Nabi Muhammad SAW adalah:",
                    options: ["Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ", "ØµÙÙÙØ±ÙŒ", "Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø¢Ø®ÙØ±Ù", "Ø±ÙÙŠÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù"],
                    correct: 3,
                    explanation: "Nabi Muhammad SAW lahir pada bulan Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù"
                },
                {
                    question: "ØµÙÙÙØ±ÙŒ adalah bulan ke:",
                    options: ["1", "3", "2", "4"],
                    correct: 2,
                    explanation: "ØµÙÙÙØ±ÙŒ adalah bulan ke-2 dalam kalender Hijriah"
                },
                {
                    question: "Bulan sebelum Ramadan adalah:",
                    options: ["ÙØ¬ÙØ¨ÙŒ", "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ", "Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù", "Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù"],
                    correct: 2,
                    explanation: "Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù adalah bulan sebelum Ramadan"
                },
                {
                    question: "Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ disebut bulan haram karena:",
                    options: ["Bulan puasa", "Bulan haji", "Bulan suci", "Bulan maulid"],
                    correct: 2,
                    explanation: "Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ disebut bulan haram karena merupakan bulan suci"
                },
                {
                    question: " Ø­ÙÙ…ÙØ§Ø¯Ù Ø§Ù„Ø£ÙˆÙÙ‘Ù„ adalah bulan ke:",
                    options: ["4", "6", "5", "7"],
                    correct: 2,
                    explanation: " Ø­ÙÙ…ÙØ§Ø¯Ù Ø§Ù„Ø£ÙˆÙÙ‘Ù„ adalah bulan ke-5 dalam kalender Hijriah"
                },
                {
                    question: "Bulan terakhir dalam kalender Hijriah adalah:",
                    options: ["Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù", "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ", "Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù", "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù"],
                    correct: 2,
                    explanation: "Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù adalah bulan ke-12 atau bulan terakhir"
                },
                {
                    question: "Ø±ÙØ¬ÙØ¨ÙŒ adalah bulan ke:",
                    options: ["6", "8", "7", "9"],
                    correct: 2,
                    explanation: "Ø±ÙØ¬ÙØ¨ÙŒ adalah bulan ke-7 dalam kalender Hijriah"
                },
                {
                    question: "Kalender Hijriah dimulai dari peristiwa:",
                    options: ["Kelahiran Nabi", "Isra Miraj", "Hijrah", "Fathu Makkah"],
                    correct: 2,
                    explanation: "Kalender Hijriah dimulai dari peristiwa Hijrah Nabi dari Makkah ke Madinah"
                },
                {
                    question: "Satu tahun Hijriah terdiri dari:",
                    options: ["365 hari", "360 hari", "354-355 hari", "350 hari"],
                    correct: 2,
                    explanation: "Satu tahun Hijriah terdiri dari 354-355 hari"
                },
                {
                    question: " Ø¹ÙØ§Ø´ÙÙˆÙ’Ø±ÙØ§Ø¡Ù jatuh pada bulan:",
                    options: ["ØµÙÙÙØ±ÙŒ", "Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ", "Ø±ÙØ¬ÙØ¨ÙŒ", "Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù"],
                    correct: 1,
                    explanation: "Ø¹ÙØ§Ø´ÙÙˆÙ’Ø±ÙØ§Ø¡Ù jatuh pada bulan Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ"
                },
                {
                    question: "Bulan setelah Ramadan adalah:",
                    options: ["Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù", "Ø°ÙÙˆ Ø§Ù„Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù", "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ", "Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù"],
                    correct: 2,
                    explanation: "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ adalah bulan setelah Ramadan"
                },
                {
                    question: "Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø¢Ø®ÙØ±Ù adalah bulan ke:",
                    options: ["3", "5", "4", "6"],
                    correct: 2,
                    explanation: "Ø±Ùï¿½ï¿½ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø¢Ø®ÙØ±Ù adalah bulan ke-4 dalam kalender Hijriah"
                },
                {
                    question: "Dalam lagu mufradat, setelah Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù adalah:",
                    options: ["ÙØ¬ÙØ¨ÙŒ", "Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ", "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù", "Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù"],
                    correct: 2,
                    explanation: "Dalam urutan bulan, setelah Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù adalah Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù"
                },
                {
                    question: "Ø¬ÙÙ…ÙØ§Ø¯ÙÙ‰ Ø§Ù„Ù’Ø¢Ø®ÙØ±ÙØ©Ù adalah bulan ke:",
                    options: ["5", "7", "6", "8"],
                    correct: 2,
                    explanation: "Ø¬ÙÙ…ÙØ§Ø¯ÙÙ‰ Ø§Ù„Ù’Ø¢Ø®ÙØ±ÙØ©Ù adalah bulan ke-6 dalam kalender Hijriah"
                },
                {
                    question: "Bulan yang disebut 'bulan yang mulia' adalah:",
                    options: ["Ù…ÙØ­ÙØ±Ù‘Ù…ÙŒ", "Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù", "Ø±ÙØ¬ÙØ¨ÙŒ", "Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù"],
                    correct: 2,
                    explanation: "Ø±ÙØ¬ÙØ¨ÙŒ disebut sebagai bulan yang mulia (Ø´ÙÙ‡Ù’Ø±ÙŒ ÙƒÙØ±ÙŠÙ’Ù…ÙŒ)"
                },
                {
                    question: "Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù adalah bulan ke:",
                    options: ["10", "12", "11", "9"],
                    correct: 2,
                    explanation: "Ø°ÙÙˆ Ø§Ù„Ù’Ù‚ÙØ¹Ù’Ø¯ÙØ©Ù adalah bulan ke-11 dalam kalender Hijriah"
                }
            ]
        };

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                studentProgress = data;
                updateProgressDisplay();
            }
        };

        // Element SDK configuration
        async function onConfigChange(config) {
            const siteTitle = config.site_title || defaultConfig.site_title;
            const welcomeMessage = config.welcome_message || defaultConfig.welcome_message;

            document.getElementById('site-title').textContent = siteTitle;
            document.getElementById('welcome-message').textContent = welcomeMessage;
        }

        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.primary_color || '#0ea5e9',
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.accent_color || '#f59e0b',
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ accent_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.background_color || '#f0f9ff',
                        set: (value) => {
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ background_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || 'Nunito',
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || 16,
                    set: (value) => {
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            };
        }

        function mapToEditPanelValues(config) {
            return new Map([
                ['site_title', config.site_title || defaultConfig.site_title],
                ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
            ]);
        }

        // Initialize application
        async function initApp() {
            try {
                // Initialize Data SDK
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error('Failed to initialize Data SDK');
                    }
                }

                // Initialize Element SDK
                if (window.elementSdk) {
                    await window.elementSdk.init({
                        defaultConfig,
                        onConfigChange,
                        mapToCapabilities,
                        mapToEditPanelValues
                    });
                }

                // Set time-based greeting
                setTimeBasedGreeting();

                // Check if student is already logged in
                checkExistingStudent();
            } catch (error) {
                console.error('Failed to initialize app:', error);
            }
        }

        function setTimeBasedGreeting() {
            const now = new Date();
            const hour = now.getHours();
            
            let greeting, message, period;
            
            // Salam sederhana untuk semua waktu
            greeting = "Assalamu'alaikum";
            
            if (hour >= 4 && hour < 11) {
                // Pagi (04:00 - 10:59)
                message = "Selamat pagi! Semoga hari ini penuh berkah dan ilmu yang bermanfaat ğŸŒ…";
                period = "petualang pagi ini";
            } else if (hour >= 11 && hour < 15) {
                // Siang (11:00 - 14:59)
                message = "Selamat siang! Waktu yang tepat untuk menambah ilmu bahasa Arab â˜€";
                period = "petualang siang ini";
            } else if (hour >= 15 && hour < 18) {
                // Sore (15:00 - 17:59)
                message = "Selamat sore! Mari gunakan waktu sore untuk belajar dengan semangat ğŸŒ¤";
                period = "petualang sore ini";
            } else if (hour >= 18 && hour < 21) {
                // Petang (18:00 - 20:59)
                message = "Selamat petang! Waktu yang baik untuk mereview pelajaran hari ini ğŸŒ†";
                period = "petualang petang ini";
            } else {
                // Malam (21:00 - 03:59)
                message = "Selamat malam! Belajar di malam hari akan membawa berkah ilmu ğŸŒ™";
                period = "petualang malam ini";
            }
            
            // Update DOM elements
            document.getElementById('time-greeting').textContent = greeting;
            document.getElementById('time-message').textContent = message;
            document.getElementById('time-period').textContent = period;
        }

        function updateGreetingWithName() {
            const nameInput = document.getElementById('student-name');
            const name = nameInput.value.trim();
            const welcomeMessage = document.getElementById('welcome-message');
            const timeGreeting = document.getElementById('time-greeting');
            
            if (name) {
                // Update greeting with name and waving hand
                timeGreeting.textContent = `Assalamu'alaikum, ${name}`;
                welcomeMessage.innerHTML = `<span id="time-greeting">Assalamu'alaikum, ${name}</span>, petualang ğŸ‘‹`;
            } else {
                // Reset to original greeting
                timeGreeting.textContent = "Assalamu'alaikum";
                welcomeMessage.innerHTML = `<span id="time-greeting">Assalamu'alaikum</span>, petualang`;
            }
        }

        function checkExistingStudent() {
            const savedStudent = localStorage.getItem('currentStudent');
            if (savedStudent) {
                currentStudent = JSON.parse(savedStudent);
                showDashboard();
            }
        }

        async function startAdventure() {
            const nameInput = document.getElementById('student-name');
            const name = nameInput.value.trim();
            
            if (!name) {
                showToast('Masukkan nama kamu dulu ya! ğŸ˜‰', 'warning');
                return;
            }

            const startBtn = document.getElementById('start-btn');
            startBtn.innerHTML = '<div class="loading-spinner inline-block mr-2"></div>Memulai...';
            startBtn.disabled = true;

            try {
                currentStudent = {
                    name: name,
                    startDate: new Date().toISOString()
                };

                // Save student data
                if (window.dataSdk) {
                    const result = await window.dataSdk.create({
                        student_name: name,
                        current_chapter: 1,
                        current_lesson: 1,
                        quiz_scores: JSON.stringify({}),
                        completed_lessons: JSON.stringify([]),
                        last_activity: new Date().toISOString()
                    });

                    if (!result.isOk) {
                        throw new Error('Failed to save student data');
                    }
                }

                localStorage.setItem('currentStudent', JSON.stringify(currentStudent));
                showDashboard();
                showToast(`Selamat datang, ${name}! Mari mulai petualangan! ğŸ‰`, 'success');
            } catch (error) {
                console.error('Error starting adventure:', error);
                showToast('Terjadi kesalahan. Coba lagi ya! ğŸ˜…', 'error');
            } finally {
                startBtn.innerHTML = 'Mulai Petualangan! ğŸš€';
                startBtn.disabled = false;
            }
        }

        function toggleMobileMenu() {
            const panel = document.getElementById('mobile-menu-panel');
            const mobileStudentInfo = document.getElementById('mobile-student-info');
            
            if (panel.classList.contains('hidden')) {
                panel.classList.remove('hidden');
                
                // Show mobile student info if logged in
                if (currentStudent) {
                    mobileStudentInfo.classList.remove('hidden');
                    document.getElementById('mobile-student-name').textContent = currentStudent.name;
                }
            } else {
                panel.classList.add('hidden');
            }
        }

        function showDashboard() {
            // Hide all screens
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            
            // Hide mobile menu
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            // Remove welcome-specific styling and add blur back
            const mainContainer = document.querySelector('.content-overlay');
            mainContainer.classList.remove('welcome-content');
            
            // Show dashboard
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('student-info').classList.remove('hidden');
            document.getElementById('nav-menu').classList.remove('hidden');
            document.getElementById('mobile-menu-btn').classList.remove('hidden');
            
            if (currentStudent) {
                // Update student info
                document.getElementById('student-name-display').textContent = `Halo, ${currentStudent.name}!`;
                updateProgressDisplay();
            }
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateProgressDisplay() {
            const completedQuizzes = getCompletedQuizzes();
            const totalChapters = Object.keys(chapters).length; // 4 bab
            const progress = totalChapters > 0 ? (completedQuizzes.length / totalChapters) * 100 : 0;
            
            document.getElementById('overall-progress').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${completedQuizzes.length}/${totalChapters} Bab Selesai (${Math.round(progress)}%)`;
        }

        function getCompletedQuizzes() {
            const progress = studentProgress.find(p => p.student_name === currentStudent.name);
            if (progress && progress.quiz_scores) {
                try {
                    const quizScores = JSON.parse(progress.quiz_scores);
                    // Return array of completed chapter numbers
                    return Object.keys(quizScores).map(key => parseInt(key.replace('chapter_', '')));
                } catch (e) {
                    return [];
                }
            }
            return [];
        }

        function getCompletedLessons() {
            const progress = studentProgress.find(p => p.student_name === currentStudent.name);
            if (progress && progress.completed_lessons) {
                try {
                    return JSON.parse(progress.completed_lessons);
                } catch (e) {
                    return [];
                }
            }
            return [];
        }

        function getTotalLessons() {
            let total = 0;
            Object.values(chapters).forEach(chapter => {
                total += chapter.lessons.length;
            });
            return total;
        }

        function openChapter(chapterNum) {
            currentChapter = chapterNum;
            currentLesson = 1;
            
            // Close mobile menu
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            showChapterContent();
        }

        function showChapterContent() {
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.remove('hidden');
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            const chapter = chapters[currentChapter];
            document.getElementById('chapter-title').textContent = chapter.title;
            document.getElementById('chapter-subtitle').textContent = chapter.subtitle;
            
            renderLessonNavigation();
            showLesson(currentLesson);
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderLessonNavigation() {
            const chapter = chapters[currentChapter];
            const navContainer = document.getElementById('lesson-buttons');
            navContainer.innerHTML = '';
            
            chapter.lessons.forEach((lesson, index) => {
                const button = document.createElement('button');
                button.className = `px-4 py-2 rounded-xl latin-body font-semibold transition-all ${
                    index + 1 === currentLesson 
                        ? 'bg-sky-500 text-white' 
                        : 'bg-white text-gray-700 hover:bg-sky-50'
                }`;
                button.textContent = `${index + 1}. ${lesson.title}`;
                button.onclick = () => showLesson(index + 1);
                navContainer.appendChild(button);
            });
        }

        function showLesson(lessonNum) {
            currentLesson = lessonNum;
            
            const chapter = chapters[currentChapter];
            const lesson = chapter.lessons[lessonNum - 1];
            
            if (!lesson) {
                console.error('Lesson not found:', lessonNum);
                return;
            }
            
            if (lesson.isQuiz) {
                startQuiz();
                return;
            }
            
            // Hide all screens
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            
            // Show chapter content
            document.getElementById('chapter-content').classList.remove('hidden');
            
            // Update navigation
            renderLessonNavigation();
            
            // Update content
            const contentContainer = document.getElementById('lesson-content');
            contentContainer.innerHTML = `
                <div class="fade-in">
                    <h3 class="latin-heading text-2xl text-gray-800 mb-6">${lesson.title}</h3>
                    ${lesson.content}
                    <div class="mt-8 flex flex-col sm:flex-row justify-between gap-3">
                        <button onclick="previousLesson()" class="btn-primary text-white py-2 px-6 rounded-xl latin-body font-semibold transition-all ${lessonNum === 1 ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-lg'}" ${lessonNum === 1 ? 'disabled' : ''}>
                            â¬… Sebelumnya
                        </button>
                        <button onclick="nextLesson()" class="btn-accent text-white py-2 px-6 rounded-xl latin-body font-semibold hover:shadow-lg transition-all">
                            ${lessonNum === chapter.lessons.length ? 'Latihan Soal' : 'Selanjutnya'} â†’
                        </button>
                    </div>
                </div>
            `;
            
            markLessonCompleted(currentChapter, lessonNum);
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        async function markLessonCompleted(chapterNum, lessonNum) {
            if (!window.dataSdk || !currentStudent) return;
            
            try {
                const progress = studentProgress.find(p => p.student_name === currentStudent.name);
                if (progress) {
                    let completedLessons = [];
                    try {
                        completedLessons = JSON.parse(progress.completed_lessons || '[]');
                    } catch (e) {
                        completedLessons = [];
                    }
                    
                    const lessonId = `${chapterNum}-${lessonNum}`;
                    if (!completedLessons.includes(lessonId)) {
                        completedLessons.push(lessonId);
                        
                        const updatedProgress = {
                            ...progress,
                            completed_lessons: JSON.stringify(completedLessons),
                            last_activity: new Date().toISOString()
                        };
                        
                        await window.dataSdk.update(updatedProgress);
                    }
                }
            } catch (error) {
                console.error('Error marking lesson completed:', error);
            }
        }

        function previousLesson() {
            if (currentLesson > 1) {
                showLesson(currentLesson - 1);
            }
        }

        function nextLesson() {
            const chapter = chapters[currentChapter];
            if (currentLesson < chapter.lessons.length) {
                showLesson(currentLesson + 1);
            }
        }

        function startQuiz() {
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.remove('hidden');
            
            quizData = [...quizQuestions[currentChapter]];
            currentQuizQuestion = 0;
            quizAnswers = new Array(quizData.length).fill(null);
            
            showQuizQuestion();
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showQuizQuestion() {
            const question = quizData[currentQuizQuestion];
            const questionContainer = document.getElementById('quiz-question');
            const optionsContainer = document.getElementById('quiz-options');
            
            document.getElementById('question-counter').textContent = `Soal ${currentQuizQuestion + 1} dari ${quizData.length}`;
            document.getElementById('quiz-progress').style.width = `${((currentQuizQuestion + 1) / quizData.length) * 100}%`;
            
            questionContainer.innerHTML = `
                <div class="text-center">
                    <h3 class="latin-body text-xl md:text-2xl lg:text-3xl text-gray-800 mb-6 px-2 font-semibold leading-relaxed">${question.question}</h3>
                </div>
            `;
            
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = `quiz-option p-4 rounded-xl cursor-pointer ${
                    quizAnswers[currentQuizQuestion] === index ? 'selected' : ''
                }`;
                optionDiv.innerHTML = `
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <div class="w-6 h-6 md:w-7 md:h-7 rounded-full border-2 border-gray-300 flex items-center justify-center flex-shrink-0">
                            <div class="w-3 h-3 md:w-4 md:h-4 rounded-full bg-sky-500 ${quizAnswers[currentQuizQuestion] === index ? '' : 'hidden'}"></div>
                        </div>
                        <span class="${/[\u0600-\u06FF]/.test(option) ? 'arabic-quiz text-2xl md:text-3xl' : 'latin-body text-lg md:text-xl'} text-gray-700 flex-1 text-right md:text-left font-medium">${option}</span>
                    </div>
                `;
                optionDiv.onclick = () => selectQuizOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            updateQuizNavigation();
        }

        function selectQuizOption(optionIndex) {
            quizAnswers[currentQuizQuestion] = optionIndex;
            showQuizQuestion();
        }

        function updateQuizNavigation() {
            const prevBtn = document.getElementById('prev-question');
            const nextBtn = document.getElementById('next-question');
            
            if (!prevBtn || !nextBtn) return;
            
            prevBtn.disabled = currentQuizQuestion === 0;
            prevBtn.className = `w-full md:w-auto btn-primary text-white py-2 px-4 md:px-6 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation transition-all ${
                currentQuizQuestion === 0 ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-lg'
            }`;
            
            const hasAnswer = quizAnswers[currentQuizQuestion] !== null;
            nextBtn.disabled = !hasAnswer;
            nextBtn.className = `w-full md:w-auto btn-accent text-white py-2 px-4 md:px-6 rounded-xl latin-body font-semibold text-sm md:text-base touch-manipulation transition-all ${
                !hasAnswer ? 'opacity-50 cursor-not-allowed' : 'hover:shadow-lg'
            }`;
            
            if (currentQuizQuestion === quizData.length - 1) {
                nextBtn.textContent = 'Selesai âœ“';
                nextBtn.onclick = function() {
                    finishQuiz();
                };
            } else {
                nextBtn.textContent = 'Selanjutnya â†’';
                nextBtn.onclick = function() {
                    nextQuestion();
                };
            }
        }

        function previousQuestion() {
            if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                showQuizQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuizQuestion < quizData.length - 1) {
                currentQuizQuestion++;
                showQuizQuestion();
            }
        }

        async function finishQuiz() {
            const score = calculateScore();
            await saveQuizScore(score);
            showQuizResults(score);
        }

        function calculateScore() {
            let correct = 0;
            quizAnswers.forEach((answer, index) => {
                if (answer === quizData[index].correct) {
                    correct++;
                }
            });
            return Math.round((correct / quizData.length) * 100);
        }

        async function saveQuizScore(score) {
            if (!window.dataSdk || !currentStudent) return;
            
            try {
                const progress = studentProgress.find(p => p.student_name === currentStudent.name);
                if (progress) {
                    let quizScores = {};
                    try {
                        quizScores = JSON.parse(progress.quiz_scores || '{}');
                    } catch (e) {
                        quizScores = {};
                    }
                    
                    quizScores[`chapter_${currentChapter}`] = score;
                    
                    const updatedProgress = {
                        ...progress,
                        quiz_scores: JSON.stringify(quizScores),
                        last_activity: new Date().toISOString()
                    };
                    
                    await window.dataSdk.update(updatedProgress);
                }
            } catch (error) {
                console.error('Error saving quiz score:', error);
            }
        }

        function showQuizResults(score) {
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.remove('hidden');
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            const resultIcon = document.getElementById('result-icon');
            const scoreDisplay = document.getElementById('score-display');
            const scoreMessage = document.getElementById('score-message');
            
            scoreDisplay.textContent = `Skor: ${score}/100`;
            
            // Generate detailed achievement description and learning tips
            const achievementData = generateAchievementDescription(score, currentChapter);
            
            if (score >= 80) {
                resultIcon.textContent = 'ğŸ‰';
                scoreMessage.innerHTML = `
                    <div class="text-center space-y-4">
                        <div class="bg-green-50 p-4 rounded-xl border-l-4 border-green-400">
                            <h3 class="latin-heading text-lg font-bold text-green-700 mb-2">ğŸ† Pencapaian Luar Biasa!</h3>
                            <p class="latin-body text-green-600">${achievementData.message}</p>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-xl border-l-4 border-blue-400">
                            <h4 class="latin-heading text-md font-semibold text-blue-700 mb-2">ğŸ“ˆ Analisis Kemampuan:</h4>
                            <p class="latin-body text-blue-600 text-sm">${achievementData.analysis}</p>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-xl border-l-4 border-purple-400">
                            <h4 class="latin-heading text-md font-semibold text-purple-700 mb-2">ğŸ’¡ Tips Lanjutan:</h4>
                            <ul class="latin-body text-purple-600 text-sm text-left space-y-1">
                                ${achievementData.tips.map(tip => `<li>ğŸ‰ ${tip}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                scoreMessage.className = 'mb-6';
            } else if (score >= 60) {
                resultIcon.textContent = 'ğŸ‘';
                scoreMessage.innerHTML = `
                    <div class="text-center space-y-4">
                        <div class="bg-blue-50 p-4 rounded-xl border-l-4 border-blue-400">
                            <h3 class="latin-heading text-lg font-bold text-blue-700 mb-2">ğŸ‘ Pencapaian Bagus!</h3>
                            <p class="latin-body text-blue-600">${achievementData.message}</p>
                        </div>
                        
                        <div class="bg-yellow-50 p-4 rounded-xl border-l-4 border-yellow-400">
                            <h4 class="latin-heading text-md font-semibold text-yellow-700 mb-2">ğŸ“ˆ Area Pengembangan:</h4>
                            <p class="latin-body text-yellow-600 text-sm">${achievementData.analysis}</p>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-xl border-l-4 border-green-400">
                            <h4 class="latin-heading text-md font-semibold text-green-700 mb-2">ğŸ¯ Tips Peningkatan:</h4>
                            <ul class="latin-body text-green-600 text-sm text-left space-y-1">
                                ${achievementData.tips.map(tip => `<li>â€¢ ${tip}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                scoreMessage.className = 'mb-6';
            } else {
                resultIcon.textContent = 'âœ‰';
                scoreMessage.innerHTML = `
                    <div class="text-center space-y-4">
                        <div class="bg-orange-50 p-4 rounded-xl border-l-4 border-orange-400">
                            <h3 class="latin-heading text-lg font-bold text-orange-700 mb-2">ğŸŒ± Terus Semangat Belajar!</h3>
                            <p class="latin-body text-orange-600">${achievementData.message}</p>
                        </div>
                        
                        <div class="bg-red-50 p-4 rounded-xl border-l-4 border-red-400">
                            <h4 class="latin-heading text-md font-semibold text-red-700 mb-2">ğŸ” Fokus Pembelajaran:</h4>
                            <p class="latin-body text-red-600 text-sm">${achievementData.analysis}</p>
                        </div>
                        
                        <div class="bg-indigo-50 p-4 rounded-xl border-l-4 border-indigo-400">
                            <h4 class="latin-heading text-md font-semibold text-indigo-700 mb-2">ğŸ“š Strategi Belajar:</h4>
                            <ul class="latin-body text-indigo-600 text-sm text-left space-y-1">
                                ${achievementData.tips.map(tip => `<li>âœ¨ ${tip}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                scoreMessage.className = 'mb-6';
            }
        }

        function generateAchievementDescription(score, chapter) {
            const chapterNames = {
                1: 'Isim Tafdil',
                2: 'Bentuk',
                3: 'Warna', 
                4: 'Kalender Hijriah'
            };
            
            const chapterName = chapterNames[chapter] || 'Materi';
            
            if (score >= 80) {
                return {
                    message: `Masya Allah! Kamu telah menguasai materi ${chapterName} dengan sangat baik. Pemahaman kamu terhadap konsep-konsep dasar sudah solid dan siap untuk materi yang lebih advanced!`,
                    analysis: `Dengan skor ${score}%, kamu menunjukkan pemahaman yang mendalam tentang ${chapterName}. Kemampuan menganalisis dan menerapkan konsep sudah sangat baik.`,
                    tips: [
                        `Lanjutkan ke bab berikutnya untuk memperluas vocabulary bahasa Arab`,
                        `Coba buat kalimat sendiri menggunakan materi ${chapterName} dalam kehidupan sehari-hari`,
                        `Ajarkan teman atau keluarga tentang materi ini untuk memperkuat pemahaman`,
                        `Mulai membaca teks Arab sederhana yang mengandung materi ${chapterName}`
                    ]
                };
            } else if (score >= 60) {
                return {
                    message: `Alhamdulillah! Kamu sudah memahami dasar-dasar ${chapterName} dengan baik. Masih ada beberapa area yang bisa ditingkatkan untuk pemahaman yang lebih sempurna.`,
                    analysis: `Skor ${score}% menunjukkan pemahaman yang cukup baik, namun masih perlu penguatan di beberapa konsep kunci dalam ${chapterName}.`,
                    tips: [
                        `Ulangi video pembelajaran ${chapterName} dan catat poin-poin penting`,
                        `Dengarkan lagu mufradat berulang kali sambil membaca teksnya`,
                        `Latihan soal tambahan dengan fokus pada area yang masih lemah`,
                        `Diskusikan materi dengan teman atau guru untuk klarifikasi konsep`,
                        `Buat flashcard untuk vocabulary yang sulit diingat`
                    ]
                };
            } else {
                return {
                    message: `Tidak apa-apa! Belajar bahasa Arab memang butuh waktu dan kesabaran. Yang penting kamu sudah berusaha. Mari kita perkuat pemahaman tentang ${chapterName} step by step.`,
                    analysis: `Skor ${score}% menunjukkan bahwa masih perlu pemahaman yang lebih mendalam tentang konsep dasar ${chapterName}. Jangan berkecil hati, ini adalah proses normal dalam belajar.`,
                    tips: [
                        `Mulai dari dasar: pelajari ulang pengertian dan ciri-ciri ${chapterName}`,
                        `Tonton video pembelajaran berkali-kali sampai paham betul`,
                        `Hafalkan vocabulary dasar terlebih dahulu sebelum ke konsep yang kompleks`,
                        `Minta bantuan guru atau teman yang sudah paham untuk menjelaskan`,
                        `Jangan terburu-buru, luangkan waktu lebih banyak untuk materi ini`,
                        `Gunakan metode belajar yang berbeda: visual, audio, dan praktek langsung`
                    ]
                };
            }
        }

        function retryQuiz() {
            // Hide results screen
            document.getElementById('quiz-results').classList.add('hidden');
            
            // Reset quiz state
            currentQuizQuestion = 0;
            quizAnswers = [];
            
            // Restart quiz
            startQuiz();
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function backToLesson() {
            // Hide quiz screens
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            
            // Show chapter content with last non-quiz lesson
            const chapter = chapters[currentChapter];
            let lastLessonNum = currentLesson;
            
            // Find the last non-quiz lesson
            for (let i = chapter.lessons.length - 1; i >= 0; i--) {
                if (!chapter.lessons[i].isQuiz) {
                    lastLessonNum = i + 1;
                    break;
                }
            }
            
            // Show that lesson
            currentLesson = lastLessonNum;
            showLesson(lastLessonNum);
        }

        function backToDashboard() {
            // Hide all screens
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            document.getElementById('maze-game-over').classList.add('hidden');
            document.getElementById('maze-question-modal').classList.add('hidden');
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            // Show dashboard
            document.getElementById('dashboard').classList.remove('hidden');
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showGames() {
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            document.getElementById('games-page').classList.remove('hidden');
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showGuide() {
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            document.getElementById('guide-page').classList.remove('hidden');
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }



        function logout() {
            localStorage.removeItem('currentStudent');
            currentStudent = null;
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            document.getElementById('student-info').classList.add('hidden');
            document.getElementById('nav-menu').classList.add('hidden');
            document.getElementById('mobile-menu-panel').classList.add('hidden');
            document.getElementById('mobile-menu-btn').classList.add('hidden');
            document.getElementById('welcome-screen').classList.remove('hidden');
            document.getElementById('student-name').value = '';
            
            // Add welcome-specific styling back (remove blur)
            const mainContainer = document.querySelector('.content-overlay');
            mainContainer.classList.add('welcome-content');
            
            // Clean up game
            mazeGame.gameRunning = false;
            document.removeEventListener('keydown', handleMazeKeyboard);
        }

        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 p-4 rounded-xl shadow-lg latin-body font-semibold text-white transition-all transform translate-x-full ${
                type === 'success' ? 'bg-green-500' :
                type === 'error' ? 'bg-red-500' :
                type === 'warning' ? 'bg-yellow-500' :
                'bg-blue-500'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(toast);
                }, 300);
            }, 3000);
        }



        // Memory Match Game Variables
        let memoryGame = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            moves: 0,
            timer: 0,
            timerInterval: null,
            difficulty: 'easy',
            totalPairs: 8,
            gameStarted: false
        };

        // Memory game vocabulary pairs
        const memoryVocabulary = {
            chapter1: [
                { arabic: 'Ø£ÙÙƒÙ’Ø¨ÙØ±Ù', indonesian: 'lebih besar' },
                { arabic: 'Ø£ÙØµÙ’ØºÙØ±Ù', indonesian: 'lebih kecil' },
                { arabic: 'Ø£ÙØ·Ù’ÙˆÙÙ„Ù', indonesian: 'lebih panjang' },
                { arabic: 'Ø£ÙÙ‚Ù’ØµÙØ±Ù', indonesian: 'lebih pendek' },
                { arabic: 'Ø£ÙÙƒÙ’Ø«ÙØ±Ù', indonesian: 'lebih banyak' },
                { arabic: 'Ø£ÙÙ‚ÙÙ„ÙÙ‘', indonesian: 'lebih sedikit' },
                { arabic: 'Ø£ÙØ³Ù’Ù‡ÙÙ„Ù', indonesian: 'lebih mudah' },
                { arabic: 'Ø£ÙØµÙ’Ø¹ÙØ¨Ù', indonesian: 'lebih sulit' }
            ],
            chapter2: [
                { arabic: 'Ù…ÙØ±ÙØ¨ÙÙ‘Ø¹ÙŒ', indonesian: 'persegi' },
                { arabic: 'Ù…ÙØ³Ù’ØªÙØ¯ÙÙŠÙ’Ø±ÙŒ', indonesian: 'lingkaran' },
                { arabic: 'Ù…ÙØ«ÙÙ„ÙÙ‘Ø«ÙŒ', indonesian: 'segitiga' },
                { arabic: 'Ù…ÙØ³Ù’ØªÙØ·ÙÙŠÙ’Ù„ÙŒ', indonesian: 'persegi panjang' },
                { arabic: 'Ù…ÙÙƒÙØ¹ÙÙ‘Ø¨ÙŒ', indonesian: 'kubus' },
                { arabic: 'ÙƒÙØ±ÙÙˆÙÙŠÙŒÙ‘', indonesian: 'bulat' },
                { arabic: 'Ù†ÙØ¬Ù’Ù…ÙØ©ÙŒ', indonesian: 'bintang' },
                { arabic: 'Ù…ÙØ®Ù’Ø±ÙÙˆÙ’Ø·ÙŒ', indonesian: 'kerucut' }
            ],
            chapter3: [
                { arabic: 'Ø£ÙØ­Ù’Ù…ÙØ±Ù', indonesian: 'merah' },
                { arabic: 'Ø£ÙØµÙ’ÙÙØ±Ù', indonesian: 'kuning' },
                { arabic: 'Ø£ÙØ®Ù’Ø¶ÙØ±Ù', indonesian: 'hijau' },
                { arabic: 'Ø£ÙØ²Ù’Ø±ÙÙ‚Ù', indonesian: 'biru' },
                { arabic: 'Ø£ÙØ¨Ù’ÙŠÙØ¶Ù', indonesian: 'putih' },
                { arabic: 'Ø£ÙØ³Ù’ÙˆÙØ¯Ù', indonesian: 'hitam' },
                { arabic: 'Ø¨ÙÙ†ÙÙ‘ÙŠÙŒÙ‘', indonesian: 'coklat' },
                { arabic: 'Ø±ÙÙ…ÙØ§Ø¯ÙÙŠÙŒÙ‘', indonesian: 'abu-abu' }
            ],
            chapter4: [
                { arabic: 'Ù…ÙØ­ÙØ±ÙÙ‘Ù…ÙŒ', indonesian: 'Bulan pertama' },
                { arabic: 'ØµÙÙÙØ±ÙŒ', indonesian: 'Bulan Kedua' },
                { arabic: 'Ø±ÙØ¨ÙÙŠÙ’Ø¹Ù Ø§Ù„Ù’Ø£ÙÙˆÙÙ‘Ù„Ù', indonesian: 'Bulan Ketiga' },
                { arabic: 'Ø±ÙÙ…ÙØ¶ÙØ§Ù†Ù', indonesian: 'Bulan Kesembilan' },
                { arabic: 'Ø´ÙÙˆÙÙ‘Ø§Ù„ÙŒ', indonesian: 'Bulan Kesepuluh' },
                { arabic: 'Ø°ÙÙˆ Ø§Ù„Ù’Ø­ÙØ¬ÙÙ‘Ø©Ù', indonesian: 'Bulan terakhir' },
                { arabic: 'Ø±ÙØ¬ÙØ¨ÙŒ', indonesian: 'Bulan Ketujuh' },
                { arabic: 'Ø´ÙØ¹Ù’Ø¨ÙØ§Ù†Ù', indonesian: 'Bulan Kedelapan' }
            ]
        };

        // Memory Match Game Functions
        function startMemoryGame() {
            // Hide other screens
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            document.getElementById('maze-game').classList.add('hidden');
            
            // Show memory game
            document.getElementById('memory-game').classList.remove('hidden');
            
            // Show difficulty selection
            document.getElementById('memory-difficulty-select').classList.remove('hidden');
            document.getElementById('memory-board').classList.add('hidden');
            document.getElementById('memory-controls').classList.add('hidden');
            
            // Reset game state
            memoryGame.gameStarted = false;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function startMemoryLevel(difficulty) {
            memoryGame.difficulty = difficulty;
            
            // Set total pairs based on difficulty
            switch(difficulty) {
                case 'easy':
                    memoryGame.totalPairs = 8;
                    break;
                case 'medium':
                    memoryGame.totalPairs = 12;
                    break;
                case 'hard':
                    memoryGame.totalPairs = 18;
                    break;
            }
            
            // Hide difficulty selection
            document.getElementById('memory-difficulty-select').classList.add('hidden');
            document.getElementById('memory-board').classList.remove('hidden');
            document.getElementById('memory-controls').classList.remove('hidden');
            
            // Initialize game
            initMemoryGame();
        }

        function initMemoryGame() {
            // Reset game state
            memoryGame.cards = [];
            memoryGame.flippedCards = [];
            memoryGame.matchedPairs = 0;
            memoryGame.moves = 0;
            memoryGame.timer = 0;
            memoryGame.gameStarted = true;
            
            // Clear timer
            if (memoryGame.timerInterval) {
                clearInterval(memoryGame.timerInterval);
            }
            
            // Generate cards
            generateMemoryCards();
            
            // Update UI
            updateMemoryUI();
            
            // Start timer
            memoryGame.timerInterval = setInterval(() => {
                memoryGame.timer++;
                updateMemoryUI();
            }, 1000);
        }

        function generateMemoryCards() {
            // Collect vocabulary from all chapters
            const allVocab = [
                ...memoryVocabulary.chapter1,
                ...memoryVocabulary.chapter2,
                ...memoryVocabulary.chapter3,
                ...memoryVocabulary.chapter4
            ];
            
            // Shuffle and select vocabulary
            const shuffled = allVocab.sort(() => Math.random() - 0.5);
            const selected = shuffled.slice(0, memoryGame.totalPairs);
            
            // Create card pairs
            const cardData = [];
            selected.forEach((vocab, index) => {
                // Arabic card
                cardData.push({
                    id: `arabic-${index}`,
                    content: vocab.arabic,
                    type: 'arabic',
                    pairId: index,
                    isFlipped: false,
                    isMatched: false
                });
                
                // Indonesian card
                cardData.push({
                    id: `indonesian-${index}`,
                    content: vocab.indonesian,
                    type: 'indonesian',
                    pairId: index,
                    isFlipped: false,
                    isMatched: false
                });
            });
            
            // Shuffle cards
            memoryGame.cards = cardData.sort(() => Math.random() - 0.5);
            
            // Render cards
            renderMemoryCards();
        }

        function renderMemoryCards() {
            const board = document.getElementById('memory-board');
            board.innerHTML = '';
            
            // Adjust grid based on difficulty
            if (memoryGame.difficulty === 'easy') {
                board.className = 'grid grid-cols-4 gap-2 md:gap-3 mb-4 md:mb-6 max-w-2xl mx-auto';
            } else if (memoryGame.difficulty === 'medium') {
                board.className = 'grid grid-cols-4 md:grid-cols-6 gap-2 md:gap-3 mb-4 md:mb-6 max-w-3xl mx-auto';
            } else {
                board.className = 'grid grid-cols-4 md:grid-cols-6 gap-2 md:gap-3 mb-4 md:mb-6 max-w-4xl mx-auto';
            }
            
            memoryGame.cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card relative aspect-square cursor-pointer transition-all transform hover:scale-105';
                cardElement.dataset.index = index;
                cardElement.onclick = () => flipMemoryCard(index);
                
                // Card inner (for flip effect)
                cardElement.innerHTML = `
                    <div class="card-inner w-full h-full relative" style="transform-style: preserve-3d; transition: transform 0.6s;">
                        <!-- Card Back -->
                        <div class="card-back absolute w-full h-full bg-gradient-to-br from-green-400 to-emerald-600 rounded-xl flex items-center justify-center shadow-lg" style="backface-visibility: hidden;">
                            <span class="text-2xl md:text-3xl">ğŸ§ </span>
                        </div>
                        <!-- Card Front -->
                        <div class="card-front absolute w-full h-full bg-white rounded-xl flex items-center justify-center shadow-lg border-2 border-green-200 p-2" style="backface-visibility: hidden; transform: rotateY(180deg);">
                            <span class="${card.type === 'arabic' ? 'arabic-text text-base md:text-xl' : 'latin-body text-sm md:text-base'} text-gray-800 font-semibold text-center leading-tight">${card.content}</span>
                        </div>
                    </div>
                `;
                
                board.appendChild(cardElement);
            });
        }

        function flipMemoryCard(index) {
            const card = memoryGame.cards[index];
            
            // Prevent flipping if game not started, already flipped, matched, or two cards already flipped
            if (!memoryGame.gameStarted || card.isFlipped || card.isMatched || memoryGame.flippedCards.length >= 2) {
                return;
            }
            
            // Flip the card
            card.isFlipped = true;
            memoryGame.flippedCards.push(index);
            
            // Update visual
            const cardElement = document.querySelector(`.memory-card[data-index="${index}"] .card-inner`);
            cardElement.style.transform = 'rotateY(180deg)';
            
            // Check for match when two cards are flipped
            if (memoryGame.flippedCards.length === 2) {
                memoryGame.moves++;
                updateMemoryUI();
                
                setTimeout(() => {
                    checkMemoryMatch();
                }, 800);
            }
        }

        function checkMemoryMatch() {
            const [index1, index2] = memoryGame.flippedCards;
            const card1 = memoryGame.cards[index1];
            const card2 = memoryGame.cards[index2];
            
            if (card1.pairId === card2.pairId) {
                // Match found!
                card1.isMatched = true;
                card2.isMatched = true;
                memoryGame.matchedPairs++;
                
                // Add matched visual effect
                const cardElement1 = document.querySelector(`.memory-card[data-index="${index1}"]`);
                const cardElement2 = document.querySelector(`.memory-card[data-index="${index2}"]`);
                
                cardElement1.classList.add('opacity-50');
                cardElement2.classList.add('opacity-50');
                
                // Check if game is complete
                if (memoryGame.matchedPairs === memoryGame.totalPairs) {
                    setTimeout(() => {
                        completeMemoryGame();
                    }, 500);
                }
            } else {
                // No match, flip back
                card1.isFlipped = false;
                card2.isFlipped = false;
                
                const cardElement1 = document.querySelector(`.memory-card[data-index="${index1}"] .card-inner`);
                const cardElement2 = document.querySelector(`.memory-card[data-index="${index2}"] .card-inner`);
                
                cardElement1.style.transform = 'rotateY(0deg)';
                cardElement2.style.transform = 'rotateY(0deg)';
            }
            
            // Reset flipped cards
            memoryGame.flippedCards = [];
            updateMemoryUI();
        }

        function completeMemoryGame() {
            // Stop timer
            clearInterval(memoryGame.timerInterval);
            memoryGame.gameStarted = false;
            
            // Calculate performance
            const minutes = Math.floor(memoryGame.timer / 60);
            const seconds = memoryGame.timer % 60;
            const timeString = minutes > 0 ? `${minutes}m ${seconds}s` : `${seconds}s`;
            
            // Performance rating
            let rating = 'â­â­â­';
            let message = 'Bagus sekali!';
            
            const efficiency = memoryGame.totalPairs / memoryGame.moves;
            if (efficiency > 0.8) {
                rating = 'â­â­â­â­â­';
                message = 'Luar biasa! Ingatan yang sempurna!';
            } else if (efficiency > 0.6) {
                rating = 'â­â­â­â­';
                message = 'Hebat! Daya ingat yang kuat!';
            } else if (efficiency > 0.4) {
                rating = 'â­â­â­';
                message = 'Bagus! Terus latih ingatan kamu!';
            }
            
            // Show success modal
            const statsDiv = document.getElementById('memory-final-stats');
            statsDiv.innerHTML = `
                <div class="space-y-3">
                    <div class="text-4xl mb-2">${rating}</div>
                    <p class="latin-heading text-lg text-gray-800 font-bold">${message}</p>
                    <div class="grid grid-cols-2 gap-4 mt-4">
                        <div class="bg-white p-3 rounded-lg">
                            <div class="text-2xl mb-1">â±ï¸</div>
                            <div class="latin-body text-sm text-gray-600">Waktu</div>
                            <div class="latin-body text-lg font-bold text-gray-800">${timeString}</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg">
                            <div class="text-2xl mb-1">ğŸ¯</div>
                            <div class="latin-body text-sm text-gray-600">Gerakan</div>
                            <div class="latin-body text-lg font-bold text-gray-800">${memoryGame.moves}</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg">
                            <div class="text-2xl mb-1">âœ…</div>
                            <div class="latin-body text-sm text-gray-600">Pasangan</div>
                            <div class="latin-body text-lg font-bold text-gray-800">${memoryGame.totalPairs}</div>
                        </div>
                        <div class="bg-white p-3 rounded-lg">
                            <div class="text-2xl mb-1">ğŸ“Š</div>
                            <div class="latin-body text-sm text-gray-600">Efisiensi</div>
                            <div class="latin-body text-lg font-bold text-gray-800">${Math.round(efficiency * 100)}%</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('memory-success-modal').classList.remove('hidden');
        }

        function updateMemoryUI() {
            const minutes = Math.floor(memoryGame.timer / 60);
            const seconds = memoryGame.timer % 60;
            const timeString = minutes > 0 ? `${minutes}:${seconds.toString().padStart(2, '0')}` : `${seconds}s`;
            
            document.getElementById('memory-time').textContent = `Waktu: ${timeString}`;
            document.getElementById('memory-moves').textContent = `Gerakan: ${memoryGame.moves}`;
            document.getElementById('memory-pairs').textContent = `Pasangan: ${memoryGame.matchedPairs}/${memoryGame.totalPairs}`;
        }

        function restartMemoryGame() {
            // Hide success modal
            document.getElementById('memory-success-modal').classList.add('hidden');
            
            // Show difficulty selection again
            document.getElementById('memory-difficulty-select').classList.remove('hidden');
            document.getElementById('memory-board').classList.add('hidden');
            document.getElementById('memory-controls').classList.add('hidden');
            
            // Clear timer
            if (memoryGame.timerInterval) {
                clearInterval(memoryGame.timerInterval);
            }
            
            // Reset state
            memoryGame.gameStarted = false;
        }

        // Maze Game Variables
        let mazeGame = {
            canvas: null,
            ctx: null,
            cellSize: 30,
            maze: [],
            player: { x: 1, y: 1 },
            finish: { x: 0, y: 0 },
            coins: [],
            score: 0,
            level: 1,
            lives: 3,
            questions: [],
            currentQuestion: null,
            gameRunning: false
        };

        // Maze Game Functions
        function startMazeGame() {
            document.getElementById('games-page').classList.add('hidden');
            document.getElementById('maze-game').classList.remove('hidden');
            
            mazeGame.canvas = document.getElementById('maze-canvas');
            mazeGame.ctx = mazeGame.canvas.getContext('2d');
            
            // Set responsive canvas size
            setupResponsiveCanvas();
            
            initMazeGame();
            
            // Add resize listener for responsive canvas
            window.addEventListener('resize', setupResponsiveCanvas);
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function setupResponsiveCanvas() {
            if (!mazeGame.canvas) return;
            
            const container = mazeGame.canvas.parentElement.parentElement; // Account for flex container
            const containerWidth = container.clientWidth - 32; // Account for padding
            const isMobile = window.innerWidth < 768;
            
            // Different sizing for mobile vs desktop
            let maxWidth, maxHeight;
            if (isMobile) {
                maxWidth = Math.min(containerWidth, window.innerWidth - 40);
                maxHeight = Math.min(maxWidth * 0.75, window.innerHeight * 0.4); // Limit height on mobile
            } else {
                maxWidth = Math.min(containerWidth, 600);
                maxHeight = maxWidth * (400 / 600);
            }
            
            // Ensure minimum size
            maxWidth = Math.max(maxWidth, 280);
            maxHeight = Math.max(maxHeight, 200);
            
            mazeGame.canvas.width = maxWidth;
            mazeGame.canvas.height = maxHeight;
            mazeGame.canvas.style.width = maxWidth + 'px';
            mazeGame.canvas.style.height = maxHeight + 'px';
            
            // Adjust cell size based on canvas size
            mazeGame.cellSize = Math.floor(Math.min(maxWidth / 20, maxHeight / 15));
            mazeGame.cellSize = Math.max(mazeGame.cellSize, 12); // Minimum cell size
            
            // Redraw if game is running
            if (mazeGame.gameRunning && mazeGame.maze.length > 0) {
                drawMaze();
            }
        }

        function initMazeGame() {
            mazeGame.score = 0;
            mazeGame.level = 1;
            mazeGame.lives = 3;
            mazeGame.gameRunning = true;
            
            generateMaze();
            generateCoins();
            loadMazeQuestions();
            updateMazeUI();
            drawMaze();
            
            // Add keyboard controls
            document.addEventListener('keydown', handleMazeKeyboard);
            
            // Add touch controls for mobile
            addTouchControls();
        }

        function addTouchControls() {
            if (!mazeGame.canvas) return;
            
            let touchStartX = 0;
            let touchStartY = 0;
            let touchEndX = 0;
            let touchEndY = 0;
            
            mazeGame.canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                touchStartX = touch.clientX;
                touchStartY = touch.clientY;
            }, { passive: false });
            
            mazeGame.canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                const touch = e.changedTouches[0];
                touchEndX = touch.clientX;
                touchEndY = touch.clientY;
                
                const deltaX = touchEndX - touchStartX;
                const deltaY = touchEndY - touchStartY;
                const minSwipeDistance = 30;
                
                // Determine swipe direction
                if (Math.abs(deltaX) > Math.abs(deltaY)) {
                    // Horizontal swipe
                    if (Math.abs(deltaX) > minSwipeDistance) {
                        if (deltaX > 0) {
                            movePlayer('right');
                        } else {
                            movePlayer('left');
                        }
                    }
                } else {
                    // Vertical swipe
                    if (Math.abs(deltaY) > minSwipeDistance) {
                        if (deltaY > 0) {
                            movePlayer('down');
                        } else {
                            movePlayer('up');
                        }
                    }
                }
            }, { passive: false });
        }

        function generateMaze() {
            const width = Math.floor(mazeGame.canvas.width / mazeGame.cellSize);
            const height = Math.floor(mazeGame.canvas.height / mazeGame.cellSize);
            
            // Initialize maze with walls
            mazeGame.maze = Array(height).fill().map(() => Array(width).fill(1));
            
            // Set player start position
            mazeGame.player = { x: 1, y: 1 };
            mazeGame.maze[1][1] = 0;
            
            // Set finish position
            mazeGame.finish = { x: width - 2, y: height - 2 };
            mazeGame.maze[height - 2][width - 2] = 0;
            
            // Generate maze using recursive backtracking for guaranteed solution
            const stack = [];
            const visited = Array(height).fill().map(() => Array(width).fill(false));
            
            function getNeighbors(x, y) {
                const neighbors = [];
                const directions = [
                    [0, -2], [2, 0], [0, 2], [-2, 0] // up, right, down, left
                ];
                
                for (const [dx, dy] of directions) {
                    const nx = x + dx;
                    const ny = y + dy;
                    if (nx > 0 && nx < width - 1 && ny > 0 && ny < height - 1 && !visited[ny][nx]) {
                        neighbors.push([nx, ny, x + dx/2, y + dy/2]);
                    }
                }
                return neighbors;
            }
            
            // Start from player position
            let currentX = 1, currentY = 1;
            visited[currentY][currentX] = true;
            stack.push([currentX, currentY]);
            
            while (stack.length > 0) {
                const neighbors = getNeighbors(currentX, currentY);
                
                if (neighbors.length > 0) {
                    // Choose random neighbor
                    const [nextX, nextY, wallX, wallY] = neighbors[Math.floor(Math.random() * neighbors.length)];
                    
                    // Remove wall between current and next cell
                    mazeGame.maze[wallY][wallX] = 0;
                    mazeGame.maze[nextY][nextX] = 0;
                    
                    visited[nextY][nextX] = true;
                    stack.push([nextX, nextY]);
                    currentX = nextX;
                    currentY = nextY;
                } else {
                    // Backtrack
                    [currentX, currentY] = stack.pop();
                }
            }
            
            // Ensure finish is reachable by creating additional paths if needed
            if (!isPathExists(1, 1, width - 2, height - 2)) {
                // Create a guaranteed path to finish
                createPathToFinish(width, height);
            }
            
            // Add some random openings for more interesting maze
            for (let i = 0; i < Math.floor((width * height) / 50); i++) {
                const x = Math.floor(Math.random() * (width - 2)) + 1;
                const y = Math.floor(Math.random() * (height - 2)) + 1;
                if (mazeGame.maze[y][x] === 1) {
                    mazeGame.maze[y][x] = 0;
                }
            }
        }
        
        function isPathExists(startX, startY, endX, endY) {
            const width = mazeGame.maze[0].length;
            const height = mazeGame.maze.length;
            const visited = Array(height).fill().map(() => Array(width).fill(false));
            const queue = [[startX, startY]];
            visited[startY][startX] = true;
            
            const directions = [[0, 1], [1, 0], [0, -1], [-1, 0]];
            
            while (queue.length > 0) {
                const [x, y] = queue.shift();
                
                if (x === endX && y === endY) {
                    return true;
                }
                
                for (const [dx, dy] of directions) {
                    const nx = x + dx;
                    const ny = y + dy;
                    
                    if (nx >= 0 && nx < width && ny >= 0 && ny < height && 
                        !visited[ny][nx] && mazeGame.maze[ny][nx] === 0) {
                        visited[ny][nx] = true;
                        queue.push([nx, ny]);
                    }
                }
            }
            
            return false;
        }
        
        function createPathToFinish(width, height) {
            // Create a simple path from start to finish
            let x = 1, y = 1;
            const endX = width - 2, endY = height - 2;
            
            // Move right first
            while (x < endX) {
                mazeGame.maze[y][x] = 0;
                x++;
            }
            
            // Then move down
            while (y < endY) {
                mazeGame.maze[y][x] = 0;
                y++;
            }
            
            // Ensure finish is accessible
            mazeGame.maze[endY][endX] = 0;
        }

        function generateCoins() {
            mazeGame.coins = [];
            const width = mazeGame.maze[0].length;
            const height = mazeGame.maze.length;
            
            // Place coins randomly in empty spaces
            for (let i = 0; i < 5 + mazeGame.level; i++) {
                let x, y;
                do {
                    x = Math.floor(Math.random() * (width - 2)) + 1;
                    y = Math.floor(Math.random() * (height - 2)) + 1;
                } while (mazeGame.maze[y][x] === 1 || 
                         (x === mazeGame.player.x && y === mazeGame.player.y) ||
                         (x === mazeGame.finish.x && y === mazeGame.finish.y) ||
                         mazeGame.coins.some(coin => coin.x === x && coin.y === y));
                
                mazeGame.coins.push({ x, y, collected: false });
            }
        }

        function loadMazeQuestions() {
            // Mix questions from all chapters
            mazeGame.questions = [];
            Object.keys(quizQuestions).forEach(chapter => {
                const chapterQuestions = quizQuestions[chapter].slice(0, 5); // Take 5 from each chapter
                mazeGame.questions.push(...chapterQuestions);
            });
            
            // Shuffle questions
            for (let i = mazeGame.questions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [mazeGame.questions[i], mazeGame.questions[j]] = [mazeGame.questions[j], mazeGame.questions[i]];
            }
        }

        function drawMaze() {
            const ctx = mazeGame.ctx;
            const cellSize = mazeGame.cellSize;
            
            // Clear canvas
            ctx.clearRect(0, 0, mazeGame.canvas.width, mazeGame.canvas.height);
            
            // Draw maze
            for (let y = 0; y < mazeGame.maze.length; y++) {
                for (let x = 0; x < mazeGame.maze[y].length; x++) {
                    if (mazeGame.maze[y][x] === 1) {
                        // Wall
                        ctx.fillStyle = '#374151';
                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                    } else {
                        // Path
                        ctx.fillStyle = '#f9fafb';
                        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                    }
                }
            }
            
            // Draw coins
            mazeGame.coins.forEach(coin => {
                if (!coin.collected) {
                    ctx.fillStyle = '#fbbf24';
                    ctx.beginPath();
                    ctx.arc(
                        coin.x * cellSize + cellSize / 2,
                        coin.y * cellSize + cellSize / 2,
                        cellSize / 4,
                        0,
                        2 * Math.PI
                    );
                    ctx.fill();
                }
            });
            
            // Draw finish
            ctx.fillStyle = '#10b981';
            ctx.fillRect(
                mazeGame.finish.x * cellSize + 2,
                mazeGame.finish.y * cellSize + 2,
                cellSize - 4,
                cellSize - 4
            );
            
            // Draw player
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(
                mazeGame.player.x * cellSize + cellSize / 2,
                mazeGame.player.y * cellSize + cellSize / 2,
                cellSize / 3,
                0,
                2 * Math.PI
            );
            ctx.fill();
        }

        function movePlayer(direction) {
            if (!mazeGame.gameRunning) return;
            
            let newX = mazeGame.player.x;
            let newY = mazeGame.player.y;
            
            switch (direction) {
                case 'up': newY--; break;
                case 'down': newY++; break;
                case 'left': newX--; break;
                case 'right': newX++; break;
            }
            
            // Check boundaries and walls
            if (newX >= 0 && newX < mazeGame.maze[0].length &&
                newY >= 0 && newY < mazeGame.maze.length &&
                mazeGame.maze[newY][newX] === 0) {
                
                mazeGame.player.x = newX;
                mazeGame.player.y = newY;
                
                // Check for coin collection
                const coin = mazeGame.coins.find(c => 
                    c.x === newX && c.y === newY && !c.collected
                );
                if (coin) {
                    coin.collected = true;
                    mazeGame.score += 10;
                    updateMazeUI();
                    
                    // Show question for coin
                    showMazeQuestion();
                }
                
                // Check for finish
                if (newX === mazeGame.finish.x && newY === mazeGame.finish.y) {
                    completeMazeLevel();
                }
                
                drawMaze();
            }
        }

        function handleMazeKeyboard(event) {
            if (!mazeGame.gameRunning) return;
            
            switch (event.key) {
                case 'ArrowUp':
                case 'w':
                case 'W':
                    event.preventDefault();
                    movePlayer('up');
                    break;
                case 'ArrowDown':
                case 's':
                case 'S':
                    event.preventDefault();
                    movePlayer('down');
                    break;
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    event.preventDefault();
                    movePlayer('left');
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    event.preventDefault();
                    movePlayer('right');
                    break;
            }
        }

        function showMazeQuestion() {
            if (mazeGame.questions.length === 0) return;
            
            mazeGame.gameRunning = false;
            const question = mazeGame.questions[Math.floor(Math.random() * mazeGame.questions.length)];
            mazeGame.currentQuestion = question;
            
            const modal = document.getElementById('maze-question-modal');
            const content = document.getElementById('maze-question-content');
            const options = document.getElementById('maze-question-options');
            
            content.innerHTML = `
                <div class="text-center">
                    <p class="latin-body text-lg text-gray-800 font-semibold">${question.question}</p>
                </div>
            `;
            
            options.innerHTML = '';
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'w-full p-3 text-left rounded-xl border-2 border-gray-200 hover:border-blue-400 hover:bg-blue-50 transition-all';
                button.innerHTML = `
                    <span class="${/[\u0600-\u06FF]/.test(option) ? 'arabic-text text-xl' : 'latin-body'} text-gray-700">${option}</span>
                `;
                button.onclick = () => answerMazeQuestion(index);
                options.appendChild(button);
            });
            
            modal.classList.remove('hidden');
        }

        function answerMazeQuestion(selectedIndex) {
            const correct = selectedIndex === mazeGame.currentQuestion.correct;
            
            if (correct) {
                mazeGame.score += 20;
                showToast('Benar! +20 poin ğŸ‰ğŸ‘', 'success');
            } else {
                mazeGame.lives--;
                showToast('Salah! -1 nyawa ğŸ’”', 'error');
                
                if (mazeGame.lives <= 0) {
                    gameOverMaze();
                    return;
                }
            }
            
            document.getElementById('maze-question-modal').classList.add('hidden');
            mazeGame.gameRunning = true;
            updateMazeUI();
        }

        function completeMazeLevel() {
            mazeGame.level++;
            mazeGame.score += 50;
            
            if (mazeGame.level > 3) {
                // Game completed
                showMazeGameOver(true);
            } else {
                showToast(`Level ${mazeGame.level - 1} selesai! +50 poin ğŸŠğŸ‘`, 'success');
                // Generate new maze for next level
                setTimeout(() => {
                    generateMaze();
                    generateCoins();
                    updateMazeUI();
                    drawMaze();
                }, 1500);
            }
        }

        function gameOverMaze() {
            showMazeGameOver(false);
        }

        function showMazeGameOver(won) {
            mazeGame.gameRunning = false;
            document.removeEventListener('keydown', handleMazeKeyboard);
            
            const modal = document.getElementById('maze-game-over');
            const icon = document.getElementById('maze-result-icon');
            const title = document.getElementById('maze-result-title');
            const message = document.getElementById('maze-result-message');
            const finalScore = document.getElementById('maze-final-score');
            
            if (won) {
                icon.textContent = 'ğŸ†';
                title.textContent = 'Selamat!';
                message.textContent = 'Kamu berhasil menyelesaikan semua level labirin!';
            } else {
                icon.textContent = 'ğŸ’ª';
                title.textContent = 'Game Over';
                message.textContent = 'Jangan menyerah! Coba lagi untuk skor yang lebih baik.';
            }
            
            finalScore.textContent = `Skor Akhir: ${mazeGame.score}`;
            modal.classList.remove('hidden');
        }

        function updateMazeUI() {
            // Update desktop UI
            const scoreEl = document.getElementById('maze-score');
            const levelEl = document.getElementById('maze-level');
            const livesEl = document.getElementById('maze-lives');
            
            if (scoreEl) scoreEl.textContent = `Skor: ${mazeGame.score}`;
            if (levelEl) levelEl.textContent = `Level: ${mazeGame.level}`;
            if (livesEl) livesEl.textContent = `â¤ï¸ ${mazeGame.lives}`;
            
            // Update mobile UI
            const scoreMobileEl = document.getElementById('maze-score-mobile');
            const levelMobileEl = document.getElementById('maze-level-mobile');
            const livesMobileEl = document.getElementById('maze-lives-mobile');
            
            if (scoreMobileEl) scoreMobileEl.textContent = `Skor: ${mazeGame.score}`;
            if (levelMobileEl) levelMobileEl.textContent = `Level: ${mazeGame.level}`;
            if (livesMobileEl) livesMobileEl.textContent = `Nyawa: ${mazeGame.lives}`;
        }

        function restartMazeGame() {
            // Hide game over modal
            document.getElementById('maze-game-over').classList.add('hidden');
            
            // Reset and reinitialize maze game
            mazeGame.score = 0;
            mazeGame.level = 1;
            mazeGame.lives = 3;
            mazeGame.coins = [];
            mazeGame.questions = [];
            mazeGame.currentQuestion = null;
            
            // Reinitialize the game
            initMazeGame();
            
            // Ensure game screen is visible
            document.getElementById('maze-game').classList.remove('hidden');
        }

        function backToGames() {
            // Hide all maze-related screens
            document.getElementById('maze-game').classList.add('hidden');
            document.getElementById('maze-game-over').classList.add('hidden');
            document.getElementById('maze-question-modal').classList.add('hidden');
            
            // Hide memory game screens
            document.getElementById('memory-game').classList.add('hidden');
            document.getElementById('memory-success-modal').classList.add('hidden');
            
            // Hide other screens
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('chapter-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('quiz-results').classList.add('hidden');
            document.getElementById('guide-page').classList.add('hidden');
            
            // Show games page
            document.getElementById('games-page').classList.remove('hidden');
            
            // Clean up maze game
            mazeGame.gameRunning = false;
            document.removeEventListener('keydown', handleMazeKeyboard);
            window.removeEventListener('resize', setupResponsiveCanvas);
            
            // Clean up touch events
            if (mazeGame.canvas) {
                const canvas = mazeGame.canvas;
                // Remove all touch listeners by cloning the canvas
                const newCanvas = canvas.cloneNode(true);
                if (canvas.parentNode) {
                    canvas.parentNode.replaceChild(newCanvas, canvas);
                }
                mazeGame.canvas = newCanvas;
            }
            
            // Clean up memory game
            if (memoryGame.timerInterval) {
                clearInterval(memoryGame.timerInterval);
            }
            memoryGame.gameStarted = false;
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ac8586653c440fb',t:'MTc2NTQ5MTM3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
